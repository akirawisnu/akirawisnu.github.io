/*    HTTP Host:  static.ak.fbcdn.net                                          */
/*    Generated:  December 21st 2009 1:29:50 PM PST                            */
/*      Machine:  10.16.140.108                                                */
/*       Source:  Backing Store                                                */
/*     Location:  js/dnt1h3m1jeo04s0c.pkg.js h:ege5e8r0                        */
/*       Locale:  nu_ll                                                        */
/*         Path:  js/dnt1h3m1jeo04s0c.pkg.js                                   */

((location=='about:blank'&&(window.parent.eval_global||window.parent.eval))||(window.eval_global||window.eval))("if (window.CavalryLogger) { CavalryLogger.start_js([\"js\\\/dnt1h3m1jeo04s0c.pkg.js\"]); }\n\nfunction UINav(a,c,b){this.controller=a;this.data=b;copy_properties(this,{controller:a,data:b,items:[],selectedItem:null,selectedClass:this.selectedClass||''});this.initializeItems(c);UINav.instances[a.id]=this;}UINav.instances={};UINav.prototype.getItemContainers=abstractMethod;UINav.prototype.getItemLinks=abstractMethod;UINav.prototype.getItems=function(){return this.items;};UINav.prototype.initializeItems=function(d){var a=this.getItemContainers();for(var b=0;b<a.length;b++){var e=(a[b].scry('a')||[])[0];if(!e)break;var c={};if(this.is_wrapped){c=(d[b]||{});}else c={container:a[b],link:e,data:(d[b]||{})};this.items.push(c);if(CSS.hasClass(c.container,this.selectedClass))this.selectedItem=c;c.addClickHandler=this.addClickHandler.bind(this,c);c.addClickHandler(this.selectItem.bind(this,c));}};UINav.prototype.selectItem=function(a){if(a==this.selectedItem)return true;if(this.selectedItem)CSS.removeClass(this.selectedItem.container,this.selectedClass);if(a)CSS.addClass(a.container,this.selectedClass);this.selectedItem=a;return true;};UINav.prototype.deselectAll=function(){if(this.selectedItem)CSS.removeClass(this.selectedItem.container,this.selectedClass);this.selectedItem=null;};UINav.prototype.getSelectedItem=function(){return this.selectedItem;};UINav.prototype.addClickHandler=function(b,a){if(typeof b=='function'){a=b;this.getItems().each(function(c,d){this.addClickHandler(d,c);}.bind(this,a));return true;}else return Event.listen(b.link,'click',a);};function UINavGeneric(a,c,b){if(!this.selectedClass)this.selectedClass='UINavGeneric_ItemSelected';this.parent.construct(this,a,c,b);}UINavGeneric.extend('UINav');UINavGeneric.prototype.getItemContainers=function(){if(!this.containers)this.containers=DOM.scry(this.controller,'li');return this.containers;};UINavGeneric.prototype.getItemLinks=function(){if(!this.containerLinks)this.containerLinks=DOM.scry(this.controller,'li a');return this.containerLinks;};function UITabStructure(a,c,b){if(!this.selectedClass)this.selectedClass='UITabStructure_TabSelected';this.parent.construct(this,a,c,b);}UITabStructure.extend('UINavGeneric');UITabStructure.prototype.getItemContainers=function(){if(!this.tab_containers){this.tab_containers=[];var b=DOM.scry(this.controller,'li');for(var a=0;a<b.length;a++)this.tab_containers.push(b[a].childNodes[0]);}return this.tab_containers;};function UISourceList(a,c,b){if(!this.selectedClass)this.selectedClass='UISourceList_ItemSelected';this.parent.construct(this,a,c,b);}UISourceList.extend('UINavGeneric');\nfunction UIFilterList(a,c,b){this.selectedClass='selected';this._itemsContainer=DOM.scry(a,'div.UIFilterList_List')[0];this.parent.construct(this,a,c,b);}UIFilterList.extend('UINav');UIFilterList.prototype.getItemContainers=function(){if(!this.containers)this.containers=DOM.scry(this.controller,'div.UIFilterList_Item');return this.containers;};UIFilterList.prototype.getItemLinks=function(){if(!this.containerLinks)this.containerLinks=DOM.scry(this.controller,'div.UIFilterList_Item a');return this.containerLinks;};UIFilterList.prototype.resetItemContainers=function(){this.containers=null;};UIFilterList.prototype.resetItemLinks=function(){this.containerLinks=null;};UIFilterList.prototype.setEditIconHandler=function(a){this._editIconHandler=a;return this;};UIFilterList.prototype.setLoading=function(a){CSS.conditionClass(this.controller,'UIFilterList_Loading',a);};UIFilterList.prototype.setCreateLinkHandler=function(b){var a=DOM.find(this.controller,'a.UIFilterList_Create');a.listen('click',b);};UIFilterList.prototype.addItem=function(l,b,k,c,a){if(!k)k=0;var g=this.getItems();a=a?a:{};var j=$N('div',{className:'UIFilterList_Item'});var h=$N('a',{className:'UIFilterList_ItemLink',href:b});if(c){var d=$N('span',{className:'UIImageBlock_Image UIFilterList_Icon'});d.setStyle('backgroundImage','url('+c+')');var e=$N('div',{className:'UIImageBlock clearfix'});e.appendContent(d);e.appendContent($N('div',{className:'UIImageBlock_Content UIFilterList_Title'},l));h.appendContent(e);}else h.appendContent($N('div',{className:'UIImageBlock_Content UIFilterList_Title '+'UIFilterList_TitleWithoutIcon'},l));var i=$N('span',{className:'UIFilterList_LoadingIndicator'});j.setContent([h,i]);var f={container:j,link:h,data:a};if(g.length>0){if(this.getItems()[k]){DOM.insertBefore(j,g[k].container);}else{k=k-1;DOM.insertAfter(g[k].container,j);}}else{this._itemsContainer.appendContent(j);CSS.removeClass(this.controller,'UIFilterList_HasBlankState');}this.getItems().splice(k,0,f);this.getItemContainers().splice(k,0,f.container);this.getItemLinks().splice(k,0,f.link);return f;};UIFilterList.prototype.setItemTitle=function(a,b){var c=DOM.find(a.link,'div.UIFilterList_Title');c.setContent(b);};UIFilterList.prototype.removeItem=function(b){var d=this.getItems();var c=null;for(var a=0;a<d.length;a++)if(d[a]==b){c=a;break;}if(c!=null){if(this.selectedItem==b)this.selectItem(null);this.getItemContainers().splice(c,1);this.getItemLinks().splice(c,1);this.getItems().splice(c,1);DOM.remove(b.container);}if(d.length==0)CSS.addClass(this.controller,'UIFilterList_HasBlankState');};\nfunction UIStaticHomeFilter(f,a,d,e,c,g){this.parent.construct(this,f,d,c);copy_properties(this,{root:f,stream:g,assoc_id:a,num_visible:e});if(this.stream){UIStaticHomeFilter.activate(this,this.stream.getID());var b=function(){UIStaticHomeFilter.active[this.stream.getID()].each(function(i){if(this!==i)i.deselectAll();}.bind(this));}.bind(this);this.addClickHandler(b);this.stream.setHomeFilter(this);}var h=UIStaticHomeFilter.handlePageTransition.bind(this);PageTransitions.registerHandler(h);this.editModeLink=f.find('a.UIFilterList_EditLink');this.editModeLink.listen('click',this.enableEdit.bind(this));if(CSS.hasClass(this.root,'UIFilterList_ShowHiddenSection'))this.enableEdit();Arbiter.subscribe(Arbiter.LIST_EDITOR_LISTS_CHANGED,this._listsChanged.bind(this),Arbiter.SUBSCRIBE_NEW);}UIStaticHomeFilter.extend('UIFilterList');UIStaticHomeFilter.prototype={loadFilterByKey:function(a){if(a==UIIntentionalStream.FEED_FILTER_KEY_NEW_HIGHLIGHTS||a==UIIntentionalStream.FEED_FILTER_KEY_NEWS_FEED)a=UIIntentionalStream.FEED_FILTER_KEY_DUAL_NEWS_FEED;for(var b=0,d=this.items.length;b<d;b++){var c=this.items[b];if(c.data.filter==a)return this.selectItem(c);}return false;},_listsChanged:function(b,a){if(b==Arbiter.LIST_EDITOR_LISTS_CHANGED)if(a.is_new_list){var a={new_key:'fl'+'_'+a.list_info.list_id,id:this.assoc_id};new AsyncRequest().setURI('\/ajax\/filterlist.php').setData(a).setHandler(function(c){goURI(URI('\/home.php').addQueryData({filter:c}),true);}.bind(null,a.new_key)).send();}else goURI(URI('\/home.php'),true);}};UIStaticHomeFilter.handlePageTransition=function(c){var a=c.getQueryData();if(!this.stream||a.disable_nile||a.ref||(c.getPath()!='\/'&&c.getPath()!='\/home.php'))return false;this.loadFilterByKey(a.filter);var b={filter:a.filter};this.stream.refresh(UIIntentionalStream.REFRESH_TRANSITION,a,b);return true;};UIStaticHomeFilter.activate=function(a,b){if(!UIStaticHomeFilter.active[b])UIStaticHomeFilter.active[b]=[];UIStaticHomeFilter.active[b].push(a);};UIStaticHomeFilter.active={};UIStaticHomeFilter.prototype.enableEdit=function(){if(this.homeFilter){this.homeFilter.beginEditMode();}else Bootloader.loadComponents('UIHomeFilter',this.loadedResources.bind(this));};UIStaticHomeFilter.prototype.loadedResources=function(){this.homeFilter=new UIHomeFilter(this.controller,this.assoc_id,this.items,this.num_visible,this.data,true);this.homeFilter.beginEditMode();};\nfunction pagecache_log_feed_tracking(){var b=DOM.scry(document.body,'div.UIStory');var a=b.map(function(c){return collect_data_attrib(c,'ft');});a=a.filter(count).map(JSON.encode);if(!a.length)return;new AsyncRequest().setMethod('POST').setURI('\/ajax\/feed_tracking_pagecache.php').setReadOnly(true).setOption('bundle',true).setData({ft:$A(a)}).send();}\nfunction UntrustedLink(a,c,b){this.dom=a;this.url=a.href;this.hash=c;this.dom.listen('click',this.onclick.bind(this));this.dom.listen('mousedown',this.onmousedown.bind(this));this.dom.listen('mouseup',this.onmouseup.bind(this));this.dom.listen('mouseout',this.onmouseout.bind(this));this.onmousedown($E(b));}UntrustedLink.bootstrap=function(a,c,b){if(a.__untrusted)return;a.__untrusted=true;new UntrustedLink(a,c,b);};UntrustedLink.prototype.getRewrittenURI=function(){return (new URI('\/l.php')).setQueryData({u:this.url,h:this.hash}).setSubdomain('www');};UntrustedLink.prototype.onclick=function(){(function(){this.dom.href=this.url;}).bind(this).defer(100);this.dom.href=this.getRewrittenURI();};UntrustedLink.prototype.onmousedown=function(a){if(a.button==2)this.dom.href=this.getRewrittenURI();};UntrustedLink.prototype.onmouseup=function(){this.dom.href=this.getRewrittenURI();};UntrustedLink.prototype.onmouseout=function(){this.dom.href=this.url;};\nvar PrivacyBaseValue={FACEBOOK_EMPLOYEES:112,CUSTOM:111,OPEN:100,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0};var PrivacyFriendsValue={EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0};var PrivacySpecialPreset={ONLY_CORP_NETWORK:200,COLLEGE_NETWORK_FRIENDS_OF_FRIENDS:201,COLLEGE_NETWORK_FRIENDS:202};var PrivacyNetworkTypes={TYPE_COLLEGE:1,TYPE_HS:2,TYPE_CORP:3,TYPE_GEO:4,TYPE_TEST:50};var PrivacyNetworksAll=1;copy_properties(PrivacyBaseValue,PrivacySpecialPreset);function PrivacyModel(){this.value=PrivacyBaseValue.ALL_FRIENDS;this.friends=PrivacyFriendsValue.ALL_FRIENDS;this.networks=[];this.lists=[];this.lists_x=[];this.list_anon=0;this.ids_anon=[];this.list_x_anon=0;this.ids_x_anon=[];this.tdata={};return this;}copy_properties(PrivacyModel.prototype,{init:function(j,a,h,f,g,d,b,e,c,i){this.value=j;this.friends=a;this.networks=h.clone();this.lists=f.clone();this.lists_x=g.clone();this.list_anon=d;this.ids_anon=b.clone();this.list_x_anon=e;this.ids_x_anon=c.clone();i=i||{};copy_properties(this.tdata,i);},clone:function(){var a=new PrivacyModel();a.init(this.value,this.friends,this.networks,this.lists,this.lists_x,this.list_anon,this.ids_anon,this.list_x_anon,this.ids_x_anon,this.tdata);return a;},getData:function(){var b=['value','friends','networks','lists','lists_x','list_anon','ids_anon','list_x_anon','ids_x_anon'];var d={};for(var c=0;c<b.length;++c){var a=b[c];d[a]=this[a];}return d;}});\nfunction BasePrivacyWidget(a,c,b){this._controllerId=a;this._root=$(a);this._menu=null;this._selectList=null;this._useInitialExplanation=true;this._options=copy_properties(b,c);BasePrivacyWidget.setup();}copy_properties(BasePrivacyWidget,{MAX_DESCRIPTION_LENGTH:28,setup:function(){if(this._is_set_up)return;this._is_set_up=true;this.OPTIONS_TEXT={};this.OPTIONS_TEXT[PrivacyBaseValue.EVERYONE]=_tx(\"Everyone\");this.OPTIONS_TEXT[PrivacyBaseValue.NETWORKS_FRIENDS_OF_FRIENDS]=_tx(\"Friends of Friends and Networks\");this.OPTIONS_TEXT[PrivacyBaseValue.NETWORKS_FRIENDS]=_tx(\"Friends and Networks\");this.OPTIONS_TEXT[PrivacyBaseValue.FRIENDS_OF_FRIENDS]=_tx(\"Friends of Friends\");this.OPTIONS_TEXT[PrivacyBaseValue.ALL_FRIENDS]=_tx(\"Only Friends\");this.OPTIONS_TEXT[PrivacyBaseValue.CUSTOM]=_tx(\"Customize\");this.OPTIONS_TEXT[PrivacyBaseValue.SELF]=_tx(\"Only Me\");}});BasePrivacyWidget.prototype={getData:function(){return this._model.getData();},_isCustomSetting:function(a){return (a==PrivacyBaseValue.CUSTOM);},_getSelectListLabel:function(b,a){if(a&&this._isCustomSetting(b))return _tx(\"Custom\");return BasePrivacyWidget.OPTIONS_TEXT[b];},_getPrivacySettingDescription:function(a){if(BasePrivacyWidget.OPTIONS_TEXT[a]&&a!=PrivacyBaseValue.CUSTOM)return BasePrivacyWidget.OPTIONS_TEXT[a];return _tx(\"Custom\");},_getMenuContent:function(){if(!this._selectList){this._selectList=new UISelectList();this._selectList.setMode(UISelectList.SINGLE_SELECT_MODE);this._selectList.setCallback(this._onMenuSelect.bind(this));}this._selectList.clearItems();for(var c=0;c<this._privacyOptions.length;c++){var d=this._privacyOptions[c],b=false,a=(d==this._model.value);if(this._isCustomSetting(d)&&this._isCustomSetting(this._model.value))b=true;var e=this._getSelectListLabel(d,a);if(a&&b)e=$N('div',{className:'UIPrivacyWidget_Custom'},[$N('span',{className:'UIPrivacyWidget_CustomLabel'},e),$N('span',{className:'UIPrivacyWidget_CustomEditLink'},_tx(\"edit\"))]);this._selectList.addItem(e,a,d);}return this._selectList.getElement();},_updateDescription:function(a){this._menu.setTitle(a);if(this._options.tooltipMode)this._menu.setTooltip(a);},_resetMenu:function(){var a=(this._model.value==PrivacyBaseValue.CUSTOM);var b;if(this._useInitialExplanation&&this._options.initialExplanation){b=HTML(this._options.initialExplanation);a=false;}else b=this._getPrivacySettingDescription(this._model.value);this._useInitialExplanation=false;this._menu.buildMenu();this._updateDescription(b);if(a)new AsyncRequest().setURI('\/ajax\/privacy\/more_details.php').setData({fbid:this._fbid,privacy_data:this._model.getData()}).setHandler(function(c){b=c.getPayload().explanation;if(b.length>BasePrivacyWidget.MAX_DESCRIPTION_LENGTH)b=b.substring(0,BasePrivacyWidget.MAX_DESCRIPTION_LENGTH)+'...';this._updateDescription(b);}.bind(this)).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding).send();}};\nfunction UIPrivacyWidget(a,b,g,c,d,f){var e={autoSave:false,alignRight:true,tooltipMode:false,saveAsDefaultFbid:0,suppressButton:true,range:[],initialExplanation:''};this.parent.construct(this,a,f,e);this._lists=c;this._networks=d;this._fbid=b;if(this._options.autoSave){if(!b)this._options.autoSave=false;if(this._options.saveAsDefaultFbid*1)this._options.saveAsDefaultFbid=0;}this._init(g);UIPrivacyWidget.instances[this._controllerId]=this;}copy_properties(UIPrivacyWidget,{DIALOG_URI:'\/ajax\/privacy\/privacy_widget_dialog.php',instances:{},getInstance:function(a){return this.instances[a];}});UIPrivacyWidget.extend('BasePrivacyWidget');UIPrivacyWidget.mixin('Arbiter',{_init:function(b){this.setData(b);this._menu=new UIActionMenu().setContentCallback(this._getMenuContent.bind(this)).setIcon(UIActionMenu.ICONS.LOCK).setSuppressButton(this._options.suppressButton).setAlignRight(this._options.alignRight);if(this._options.tooltipMode)this._menu.setSuppressText(true);this._menu.subscribe('menuActivated',function(){this.inform('menuActivated');}.bind(this));this._resetMenu();var a=DOM.find(this._root,'div.UIPrivacyWidget_Root');a.setContent(this._menu.getNodes());},reset:function(){this._model=this._originalModel.clone();this._modelClone=this._originalModel.clone();this._resetMenu();return this;},getValue:function(){return this._model.value;},getDefaultValue:function(){return this._originalModel.value;},isEveryonePrivacy:function(){return this._model.value==PrivacyBaseValue.EVERYONE;},dialogOpen:function(){return this._dialog&&this._dialog.getRoot();},setData:function(b){this._model=new PrivacyModel();this._model.init(b.value,b.friends,b.networks,b.lists,b.lists_x,b.list_anon,b.ids_anon,b.list_x_anon,b.ids_x_anon,b.tdata);this._modelClone=this._model.clone();if(this._options.range.length){this._privacyOptions=this._options.range;}else this._privacyOptions=[PrivacyBaseValue.EVERYONE,PrivacyBaseValue.NETWORKS_FRIENDS,PrivacyBaseValue.FRIENDS_OF_FRIENDS,PrivacyBaseValue.ALL_FRIENDS,PrivacyBaseValue.CUSTOM];if(is_empty(this._networks))this._privacyOptions.remove(PrivacyBaseValue.NETWORKS_FRIENDS);var a=this._privacyOptions.length-1;if(this._privacyOptions[a]!=PrivacyBaseValue.CUSTOM)if(this._isCustomSetting(this._model.value))this._model.value=PrivacyBaseValue.ALL_FRIENDS;this._originalModel=this._model.clone();this._customModel=null;if(this._menu)this._resetMenu();},setLists:function(a){this._lists=a;return this;},setNetworks:function(a){this._networks=a;return this;},_isCustomSetting:function(a){return (a==PrivacyBaseValue.CUSTOM||a==PrivacyBaseValue.NETWORKS_FRIENDS_OF_FRIENDS||a==PrivacyBaseValue.SELF);},_onMenuSelect:function(a,c){this._modelClone=this._model.clone();var b=this._isCustomSetting(this._model.value);var d=this._isCustomSetting(c);if(b&&!d)this._customModel=this._model.clone();if(!(b&&d)){this._model.value=c;this._resetModelAuxiliaryData();}if(c==PrivacyBaseValue.CUSTOM){if(this._customModel){this._model=this._customModel.clone();}else if(this._modelClone.value!=PrivacyBaseValue.CUSTOM)this._model.friends=PrivacyFriendsValue.ALL_FRIENDS;this._showDialog();}else{this.inform('privacyChanged',this.getData());if(this._options.autoSave)this._saveSetting();}this._resetMenu();this._menu.hideMenu();},_showDialog:function(){var a={controller_id:this._controllerId,privacy_data:this.getData(),fbid:this._fbid,save_as_default_fbid:this._options.saveAsDefaultFbid};this._dialog=new Dialog().setAsync(new AsyncRequest().setURI(UIPrivacyWidget.DIALOG_URI).setData(a)).setModal(true).show();return false;},_resetModelAuxiliaryData:function(){if(this._model.value!=PrivacyBaseValue.CUSTOM)this._model.lists_x=this._model.lists=this._model.networks=this._model.ids_x_anon=[];},_saveSetting:function(a){a=a||this._fbid;new AsyncRequest().setURI('\/ajax\/privacy\/widget_save.php').setData({privacy_data:this._model.getData(),fbid:a}).send();}});\nfunction NoResultsDisplayer(a){this.hitAnyErrors=false;this.producedAnyResults=false;this.anyFiltersApplied=false;this.sources=a;}NoResultsDisplayer.init=function(a){NoResultsDisplayer._instance=new NoResultsDisplayer(a);};NoResultsDisplayer.instance=function(){return NoResultsDisplayer._instance;};copy_properties(NoResultsDisplayer.prototype,{producedResults:function(){this.producedAnyResults=true;},hitError:function(){this.hitAnyErrors=true;},filtersApplied:function(){this.anyFiltersApplied=true;},visit:function(a){this.sources.remove(a);if(this.sources.length==0&&!this.producedAnyResults&&!this.hitAnyErrors){show('search_no_results_message');if(!this.anyFiltersApplied)hide('search_filter_bar');}}});\nfunction share_play_video(b,c){var a=-1;if(b!=a)_share_log_play_content(b,'video');if(holder=ge(c+'_holder'))if(container=holder.parentNode.parentNode)CSS.addClass(container,'playing');return false;}function _share_log_play_content(b,a){new AsyncRequest().setURI('\/ajax\/shareplay_ajax.php').setData({s:b,m:a}).send();}\n\nif (window.Bootloader) { Bootloader.done([\"js\\\/dnt1h3m1jeo04s0c.pkg.js\"]); }")