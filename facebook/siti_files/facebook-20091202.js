(function(){if(navigator.userAgent.match(/Firefox\/3/)){var T=PicLensContext,f=function(cF){f.c=f.c||1;f.funcs=f.funcs||{};var cE="f"+f.c;f.funcs[cE]=cF;f.c+=1;return cE;};var ar=function(){var cF=new T();this.version=cF.version;for(var cE in cF){if(typeof cF[cE]==="function"){this[cE]=(function(cG){return function(){return cF[cG].apply(cF,arguments);};})(cE);}}this.invoke=function(cJ,cL,cI){var cK=(typeof cJ.getParentPropertyGroup!=="undefined"&&cL=="addEventListener");if(cK){for(var cG in cI){if(typeof cI[cG]==="function"){cI[cG]=f(cI[cG]);}}}var cH=cF.invoke(cJ,cL,cI);if(cJ==0&&cL=="get"){var cG=cH[0];if(typeof cH[0]!="function"&&f.funcs[cH[0]]){cH[0]=f.funcs[cH[0]];}}return cH;};};PicLensContext=ar;}function by(cE){var cF=new function(){function cG(cI,cL){var cK=this;for(var cJ=0;cJ<2;cJ++){var cI=arguments[cJ],cH=cI?cI.length:0;while(cH--){var cM=cI[cH];this[cM]=(function(cO,cN){return function(){var cR=arguments,cQ=[],cP=cR.length;while(cP--){cQ[cP]=cR[cP];}if(cN){cE.invokeAsync(cK,cO,cQ);}else{return cE.invoke(cK,cO,cQ);}};})(cM,cJ);}}}this.buildStub=function(){return new cG(arguments);};this.buildStub2=function(cH,cI){return new cG(cH,cI);};};cE.registerService("stubBuilder",cF);}function bu(cG){var cE;var cO=1,cP={};function cM(cQ){return Object.prototype.toString.apply(cQ)==="[object Array]";}function cK(cQ){return(typeof cQ==="object"&&!cM(cQ))||(typeof cQ==="function");}function cI(cR){if(cM(cR)){var cQ=cR.length;while(cQ--){cR[cQ]=cI(cR[cQ]);}}else{if(cK(cR)){cJ(cR);}}return cR;}function cF(cR){if(cM(cR)){var cQ=cR.length;while(cQ--){cR[cQ]=cF(cR[cQ]);}}else{if(cR&&cR.$ID){return cP[cR.$ID];}}return cR;}function cJ(cQ){if(cQ.$ID){if(!cP[cQ.$ID]){cP[cQ.$ID]=cQ;}cP[cQ.$ID].$RC++;return cQ.$ID;}cQ.$RC=1;cP[cQ.$ID=cO]=cQ;return cO++;}function cH(cQ,cR){return cJ(cP[cQ][cR]);}function cN(cQ){o=cP[cQ];if(o&&o.$ID&&!--o.$RC){delete cP[o.$ID];}}function cL(cQ,cS,cR){cQ=cF(cQ);cQ.$RETVAL=cQ.apply(cF(cS),cF(cR));}document.COOLIRIS={x:cL,a:cJ,r:cN,af:cH};return new function(){for(var cQ in cG){if(typeof cG[cQ]==="function"){this[cQ]=(function(cR){return function(){return cG[cR].apply(cG,arguments);};})(cQ);}}this.queryService=function(cR){var cS=cG.queryService(cR);return cS&&cP[cS];};this.registerService=function(cS,cR){cJ(cR);cG.registerService(cS,cR);};this.invoke=function(cU,cV,cT){var cS;cJ(cU);cT=cI(cT);try{cS=cG.invoke(cU,cV,cT);}finally{var cR=cT.length;while(cR--){cN(cT[cR]&&cT[cR].$ID);}}if(cM(cS)){return cS[0];}else{return cS&&cP[cS];}};};}function aX(){if(aX.singleton){return aX.singleton;}var cE=null;if(typeof PicLensContext!="undefined"){cE=new PicLensContext();if(navigator.userAgent.match(/Firefox\/2/)){cE=bu(cE);}}else{try{cE=new ActiveXObject("PicLens.Context");}catch(cF){if(navigator.mimeTypes["application/x-cooliris"]){cE=document.createElement("object");cE.style.width="0px";cE.style.height="0px";cE.type="application/x-cooliris";document.documentElement.appendChild(cE);}}}by(cE);return(aX.singleton=cE);}var aL=aX();function b(cF,cE){cE(cF);cF=cF.firstChild;while(cF){b(cF,cE);cF=cF.nextSibling;}}function cs(cH,cG){if(!cH.className){return false;}var cF=cH.className.split(" ");var cE=cF.length;while(cE--){if(cF[cE]===cG){return true;}}return false;}function ck(cH,cF){var cG=[],cE=function(cI){if(cs(cI,cF)){cG.push(cI);}};b(cH,cE);return cG;}function bY(cI,cG,cF){var cJ=cI.getElementsByTagName(cF),cE=cJ.length,cH=[];while(cE--){if(cs(cJ[cE],cG)){cH.push(cJ[cE]);}}return cH;}function C(cG,cF,cI){var cH=cG.getElementsByTagName(cF);var cE=cH.length;while(cE--){if(cH[cE].id==cI){return cH[cE];}}return null;}function X(cG,cH){var cF=[],cE=function(cI){if(cI.getAttribute&&cI.getAttribute("id")===cH){cF.push(cI);}};b(cG,cE);return cF[0]?cF[0]:null;}var cw=/\<[^\>]*\>/g;var an=new (function(){var cE=window;var cG=cE.document;var cF=navigator.userAgent.toLowerCase();this.ie=!!cE.VBArray;this.ie6=(this.ie&&cG.implementation);this.ie7=(this.ie&&cE.XMLHttpRequest);this.gecko=(cE.netscape&&!this.opera);this.safari=cF.indexOf("safari")+1;this.khtml=(this.safari||cF.indexOf("konqueror")+1);this.chrome=~cF.indexOf("chrome");});function bM(cH,cG){var cF=cH.getElementsByTagName(cG),cE=cF.length;while(cE--){cF[cE].parentNode.removeChild(cF[cE]);}}function S(cG){var cF=cG.getElementsByTagName("a"),cE=cF.length;while(cE--){cF[cE].href=cF[cE].href;}}function al(cF,cE){if(!cE){cE=document.createElement("div");}if(an.ie){cE.innerHTML="<div>"+cF;}else{cE.innerHTML=cF;}return cE;}function cg(cE){var cF={x:0,y:0,width:cE.offsetWidth,height:cE.offsetHeight};while(cE){cF.x+=cE.offsetLeft;cF.y+=cE.offsetTop;cE=cE.offsetParent;}return cF;}function aj(){var cG=document.getElementsByTagName("head");if(cG.length){var cF=cG[0].getElementsByTagName("link");var cE=cF.length;while(cE-->0){var cH=cF[cE];if(cH&&cH.rel&&(cH.rel.indexOf("icon")!=-1)&&cH.href){return cH.href;}}}return document.domain+"/favicon.ico";}function a6(){try{var cF=new DOMParser();this.parseFromString=function(cG){return cF.parseFromString(cG,"text/xml");};}catch(cE){this.parseFromString=function(cH){try{var cG=new ActiveXObject("Microsoft.XMLDOM");cG.async="false";if(cG.loadXML(cH)){return cG;}else{return;}}catch(cI){}};}}function bg(){if(!bg.index){bg.index=0;}return"SlNBd2Vzb21lbmVzc0J5UEpKViZOVkU"+bg.index++;}function x(cF){if(!cF.applyCallback){var cE=bg();cF.applyCallback="document."+cE;(document[cE]=function(cI,cG){var cH=cF[cI];delete cF.$returnValue;cF.$returnValue=cH&&cH.apply(cF,cG);}).toString=function(){};}}function bN(cG){if(cG.applyCallback){var cE=cG.applyCallback.replace("document.","");try{delete document[cE];}catch(cF){document[cE]=undefined;}}}var J=window["eval"];function cv(cH,cJ,cI){function cF(cL){var cK=cL.href,cM=cL.getAttribute("href");if(cJ&&cK&&cM!="#"&&cJ(cK)){cL.href=a2+cK;}else{if(cL.parentNode&&(cI||!cK||cM=="#")){var cN=document.createElement("span");cN.innerHTML=cL.innerHTML;cL.parentNode.replaceChild(cN,cL);}}}if(cH){if(cH.tagName==="A"){cF(cH);}var cG=cH.getElementsByTagName("a"),cE=cG.length;while(cE--){cF(cG[cE]);}}return cH;}function z(cI,cH){var cJ=cg(cI),cF=cg(cH),cG=d(cJ),cE=cJ.x-cF.x,cK=(cJ.y-cF.y)+(cJ.height-cG);return[cE,cK,cG,cG];}function d(cK){var cI=36,cH=28,cG=35,cJ=20,cE=cK.height/2,cL=cK.width/2,cF=cE<cL?cE:cL;if(cF<cG){cG=cF>cJ?cF:cJ;}return cG;}function bj(cE){return encodeURIComponent(cE||"");}function aY(cE){return decodeURIComponent(cE?cE.replace(/\+/g,"%20"):"");}function G(cF){cF=cF||location.search;cF=cF.replace("?","");var cH={};var cI=cF.split("&");var cG=cI.length;while(cG--){var cE=cI[cG].split("=");if(cE.length===2){cH[aY(cE[0])]=aY(cE[1]);}else{if(cE.length===1){cH[aY(cE[0])]="";}}}return cH;}function bQ(cF){var cG="";for(var cE in cF){if(cF.hasOwnProperty(cE)&&cE){cG+=(cG?"&":"?")+bj(cE)+"="+bj(""+cF[cE]);}}return cG;}function bL(cE){cE=cE||"";cE+="";return cE.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;");}function k(cE){cE=cE||"";cE+="";return cE.replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");}function v(cF){if(cF){var cG=document.createElement("div");if(cF.parentNode){cG.appendChild(cF.cloneNode(true));return cG.innerHTML;}else{cG.appendChild(cF);var cE=cG.innerHTML;cG.removeChild(cF);return cE;}}return"";}var s="http://www.w3.org/1999/xhtml";function H(cE){return cE&&cE.replace(/^<(\w+)\s*(.*?)/,'<$1 xmlns="'+s+'" $2');}var cz=/(&(quot|amp|gt|lt);)|(&(\w+);)/g;var N="$1";var aS=/<([^"<>]+?)=(\w+)([^"<>]*?)\>/g;var ai='<$1="$2"$3>';var Z=/(<.*?\s+class=)([^\s>]+)(\s|>)/g;var ao='$1"$2"$3';var aQ=/(<.*?\s+id=)([^\s>]+)(\s|>)/g;var cB='$1"$2"$3';var cD=/\<!--.*?--\>/ig;function cj(cE){if(an.ie){return H(v(cE).replace(cD,"").replace(/<br>/ig,"<br/>").replace(cz,N).replace(Z,ao).replace(aQ,cB).replace(/<\/?\s*(\S+)\s*/g,function(cF){return cF.toLowerCase();}));}else{return H(v(cE).replace(cD,"").replace(/<br>/ig,"<br/>").replace(cz,N).replace(aS,ai));}}function a9(cE){var cF=cE.xml||(new XMLSerializer()).serializeToString(cE);return H(cF);}var bW={a:true,p:true,br:true,span:true,b:true,i:true,u:true};var co=/<\/?(\w+)(\s[^>]*)?>/g;function cA(cE){if(bW[cE]){return true;}else{return false;}}function bt(cF){if(!cF){return;}var cE=function(cH,cG){if(cA(cG)){return cH;}else{return"";}};return cF.replace(co,cE);}var b2={tr:"p",li:"p",dt:"p",dd:"p",h1:"p",h2:"p",h3:"p",h4:"p",h5:"p",h6:"p",strong:"b",div:"p"};var aU={th:" ",td:" ",hr:H("<br/>")};var bR=/<(\/)?(\w+)(\s[^>]*)?>/g;function aE(cF){if(!cF){return;}var cE=function(cL,cI,cH,cG){if(b2[cH]){var cK=cI?cI:"";var cJ=cG?cG:"";return"<"+cK+b2[cH]+cJ+">";}else{if(aU[cH]){return aU[cH];}else{return cL;}}};return cF.replace(bR,cE);}function M(cH){var cI=new a6();var cG=cI.parseFromString(cH);if(cG){return cH;}var cF=function(cK,cJ){if(cJ=="br/"){return cK;}else{return"";}};var cE='<span xmlns="'+s+'">'+cH.replace(/<\/?p[^>]*>/g,"<br/>").replace(/<([^>]*)>/g,cF)+"</span>";cG=cI.parseFromString(cE);if(cG){return cE;}return"";}function aK(cE){return Object.prototype.toString.apply(cE)==="[object Array]";}function aa(cE,cF){cE.constructor.prototype[cF].call(cE);}function aV(cH,cF){var cG={},cE=true;if(typeof cH==="object"){for(var cI in cH){cG[cI]=1;if(typeof cH[cI]==="object"){cE=cE&&aV(cH[cI],cF[cI]||{});}else{cE=cE&&(cH[cI]===cF[cI]);}}for(var cI in cF){if(!cG[cI]){cE=false;}}}else{cE=(cH===cF);}return cE;}function b9(cG,cF){cF=cF||(aK(cG)?[]:{});for(var cE in cG){if(typeof cG[cE]==="object"){cF[cE]=b9(cG[cE]);}cF[cE]=cG[cE];}return cF;}function aT(cG,cF){if(!cG||!cF){return cG;}for(var cE in cF){cG[cE]=cF[cE];}return cG;}function bn(cG,cF){if(!cF||!cG){return cF;}for(var cE in cF){if(!cG.hasOwnProperty(cF[cE])){cG[cE]=cF[cE];}}return cG;}function a5(cH,cG){var cE={};for(var cF=0;cF<cG.length;cF++){if(cH.hasOwnProperty(cG[cF])){cE[cG[cF]]=cH[cG[cF]];}}return cE;}function bw(cG,cE){var cF;if(cG.attributes){cF=cG.attributes[cE];return cF&&cF.nodeValue;}else{return cG.getAttribute(cE);}}function ay(cF,cE){return window.setTimeout(cF,cE);}function U(cF,cE){return window.setInterval(cF,cE);}function ci(cG,cE){var cF=ad(cG,cE);return cF&&cF.href;}function ad(cI,cE){var cH=cI.atom$link||cI.link,cJ=aK(cH)?cH:[cH],cF=cJ.length,cG;while(cG=cJ[--cF]){if(cG.rel===cE){return cG;}}return null;}var y="http://www.w3.org/2005/Atom";function cm(cF,cE){return{xmlns:y,rel:cE||"",href:cF};}function a8(){var cG=aL.queryService("experiments"),cJ=cG.getExperimentValue("xslt-cache-buster");if(cJ){return cJ;}else{var cF=document.getElementsByTagName("head");if(cF.length){var cI=cF[0].getElementsByTagName("script"),cH=cI.length;while(--cH){var cK=cI[cH],cE=cK.src&&cK.src.match(/js\.cooliris\.com\/.+\/feeds\/.+-?(.*)?\.js\?(\d+)/);if(cE){return cE[1]||cE[2];}}}}return(new Date()).getTime();}function bk(cE){return cm(cE+"?"+a8(),"stylesheet");}var bP="http://schemas.google.com/g/2005";function cC(cE,cF){return{xmlns:bP,name:cE,value:cF};}var t=/(https?:\/\/([.]|[^\s])*)[\s$]?/;function b5(cE){cE=cE||"";return cE.replace("\r\n","<html:br />").replace("\n","<html:br />").replace(t,'<html:a href="$1">$1</a>');}function bV(cF,cE){cF=String(cF);cE=cE||2;while(cF.length<cE){cF="0"+cF;}return cF;}function cr(cE){var cI=parseInt(cE,10);var cG=cI%60;var cH=Math.floor(cI/60)%60;var cF=Math.floor(cI/3600);time=bV(cH)+":"+bV(cG);if(cF){time=bV(cF)+":"+time;}return time;}function bb(cE){return cE.replace("$",":");}function r(cH){var cF="";for(var cE in cH){var cG=cH[cE];if(cE.indexOf("xmlns$")===0){cF+=" "+bb(cE)+'="'+bL(cG)+'"';}}return cF;}function cl(cE,cG,cJ){var cI=false,cM=bb(cE),cN="<"+cM;for(var cK in cG){var cL=cG[cK];if(typeof cL!="object"){if(cK=="$t"||cK=="$xml"){cI=true;}else{cN+=" "+bb(cK)+'="'+bL(cL)+'"';}}else{cI=true;}}if(cJ){cN+=cJ;}if(cI){cN+=">";for(var cK in cG){var cL=cG[cK];if(typeof cL==="object"){var cF=cL.length;if(typeof cF!=="undefined"){for(var cH=0;cH<cF;cH++){cN+=cl(cK,cL[cH]);}}else{cN+=cl(cK,cL);}}else{if(cK=="$t"){cN+=bL(cL);}else{if(cK=="$xml"){cN+=cL;}}}}cN+="</"+cM+">";}else{cN+=" />";}return cN;}function l(cE,cG,cF){return cl(cE,cG,cF);}var a2="jsfeed:",A,a4=(function(){var cG=/(((\w+:?)\/\/)([^\/:]*)(:(\d*))?)?([^#?]*)(\?([^#]*))?(#([^?]*)(\?(.*))?)?/,cE=/^jsfeed:/i;A=function(cH){return cH.replace(cE,"");};var cF=function(cI,cH){this.parseURI(cI||location.href,cH);};cF.prototype.parseURI=function(cJ,cH){if(cJ instanceof cF){return b9(cJ,this);}var cI=A(cJ).match(cG);this.hash=cI[10];this.host=cI[4];this.hostname=cI[4];this.protocol=cI[3];this.href=cI[0];if(cH){this.pathname=(cI[11]||cI[7])||"";this.search=(cI[12]||cI[8])||"";this.hash="";}else{this.pathname=cI[7];this.search=cI[8];}this.queryParameters=G(this.search||"?");return this;};cF.prototype.implodeQueryString=function(){this.search=bQ(this.queryParameters);return this.search;};cF.prototype.toString=function(){var cH="";this.protocol&&(cH+=this.protocol+"//");this.host&&(cH+=this.host);this.port&&(cH+=":"+this.port);if(this.host&&!this.pathname){cH+="/";}this.pathname&&(cH+=this.pathname);this.implodeQueryString();this.search&&(cH+=this.search);this.hash&&(cH+=this.hash);return cH;};cF.prototype.toStringWithFragment=function(){return this.toString()+(this.hash||"");};cF.prototype.equals=function(cH){return this.protocol===cH.protocol&&this.host===cH.host&&this.hostname===cH.hostname&&this.port===cH.port&&this.pathname===cH.pathname&&(this.search===cH.search||aV(this.queryParameters,cH.queryParameters))&&(this.hash===cH.hash||aV(G(this.hash.replace("#","")),G(cH.hash.replace("#",""))));};return cF;})();function aI(cF,cE){this.status=cF.status;this.statusText=cF.statusText;this.responseXML=cF.responseXML;this.responseText=cF.responseText;this.responseBody=cF.responseBody;this.responseStream=cF.responseStream;this.readyState=cF.readyState;this.uri=cE;this.request=cF;return this;}function q(cE,cG){var cF;if(window.XMLHttpRequest){cF=new XMLHttpRequest();}else{if(window.ActiveXObject){cF=new ActiveXObject("Microsoft.XMLHTTP");}}if(cF){cF.open("GET",A(cE),true);cF.onreadystatechange=function(){if(cF.readyState===4){cG(new aI(cF,cE));}};cF.send(null);}}function n(cF,cE){if(cF&&typeof cE==="undefined"){if(typeof cF.begin!=="undefined"){this.begin=cF.begin;this.end=cF.end;}else{this.begin=cF[0];this.end=cF[1];}}else{this.begin=cF||0;this.end=cE||0;}if(this.begin>this.end){this.begin=this.end=0;}return this;}n.prototype={contains:function(cE){return(cE.begin>=this.begin&&cE.end<=this.end);},intersect:function(cF){var cG=cF.begin>this.begin?cF.begin:this.begin;var cE=cF.end<this.end?cF.end:this.end;return(cE>=cG)?new n(cG,cE):new n();},union:function(cE){var cF=new n(cE.begin<this.begin?cE.begin:this.begin,cE.end>this.end?cE.end:this.end);return(cF.end>=cF.begin)?cF:new n();},empty:function(cE){return this.begin==this.end;},size:function(){return this.end-this.begin;},toString:function(){return"["+this.begin+","+this.end+")";}};n.empty=new n(0,0);var aF=0,u=80,aJ=16;if(an.ie){aF=50;}var br=new function(){var cF=[],cK=0,cJ;function cG(){return(new Date).getTime();}function cI(){if(cF.length){cJ=cG()+aF;setTimeout(cE,aF);}}function cH(cL){if(cL<=0){return aJ;}else{return Math.min(u,aJ+cL);}}function cE(){var cN=cG(),cQ=cN-cJ,cP=cH(cQ),cM;++cK;var cL=cG(),cO=0;while((cG()-cN<cP)&&(cM=cF.shift())){try{cM();}catch(cR){}cO++;}--cK;cI(cN);}this.run=function(cL){cF.push(cL);if(cK==0){cJ=cG();cE();}};};var aw=(function(){var cE=0;return function(){return"e"+ ++cE;};})(),j=aw(),B=aw();function a3(){if(!a3.instance){this.events={};a3.instance=this;}return a3.instance;}function bf(){return a3.instance||new a3();}a3.prototype.addListener=function(cE,cG){var cF=this.events[cE]||(this.events[cE]=[]);cF.unshift(cG);};a3.prototype.removeListener=function(cE,cH){var cG=this.events[cE],cF=cG.length;while(cF--){var cI=cG[cF];if(cI===cH){cG.splice(cF,1);return;}}};a3.prototype.fire=function(cF,cE){var cH=this.events[cF]||[],cG=cH.length;if(cE!==undefined&&!aK(cE)){cE=[cE];}while(cG--){if(typeof cH[cG]==="function"){cH[cG].apply(null,cE||[]);}}};function be(){}be.prototype.initialize=function(){this.eventListeners={};this.weblink=location.href;this.uri;this.rangeBounds=new n(-65536,65535);this.rangeLoaded=new n;this.rangeNeeded=new n;this.ITEMS_PER_REQUEST=NaN;return this;};be.prototype.dispose=function(){bf().fire(B);};be.prototype.loadRange=function(cE){};be.prototype.addItem=function(cE,cF){this.addItems([cE],cF);};be.prototype.addItems=function(cG,cE){var cF;if(cE){cF=new n(this.rangeLoaded.begin-cG.length,this.rangeLoaded.begin);}else{cF=new n(this.rangeLoaded.end,this.rangeLoaded.end+cG.length);}this.rangeLoaded=this.rangeLoaded.union(cF);this.rangeBounds.end=Math.round(this.rangeBounds.end);this.raiseRangeLoadedEvent({range:cF,bounds:this.rangeBounds,items:cG});};be.prototype.raiseEvent=function(cF,cE){try{var cG=this.eventListeners[cF];if(cG){cG(cE);}}catch(cH){}};be.prototype.raiseRangeLoadedEvent=function(cG){var cF={begin:{$t:""+cG.range.begin},end:{$t:""+cG.range.end}},cJ={begin:{$t:""+cG.bounds.begin},end:{$t:""+cG.bounds.end}},cE=cG.items,cI=(((cE[0]&&cE[0].feedUrl)&&("<feedUrl>"+bL(cE[0].feedUrl)+"</feedUrl>"))||""),cK="<range>"+cI+cl("range",cF)+cl("rangeBounds",cJ);for(var cH=0;cE&&cH<cE.length;cH++){cK+=cE[cH].xml;}cK+="</range>";if(this.eventListeners.rangeLoaded2){this.raiseEvent("rangeLoaded2",cK);}else{this.raiseEvent("rangeLoaded",cG);}};be.prototype.parseComplete=function(){};be.prototype.parseResponseWithContinuation=function(cE){var cH=this,cI=[],cG=false,cJ=function(){if(cE.EOF){if(cG){cH.rangeBounds.begin=cH.rangeLoaded.begin;}else{cH.rangeBounds.end=cH.rangeLoaded.end;}cH.setBounds();}cH.parseComplete();},cK=function(){return cE.moveNext();},cF=function(){cJ();},cM=function(cN){cH.addItem(cN,cG);};if(this.rangeToLoad.begin<0){cG=true;if(cE.movePrev){cE.moveLast();cK=function(){return cE.movePrev();};}else{cM=function(cN){cI.push(cN);};cF=function(){cH.addItems(cI,cG);cJ();};}}function cL(){try{if(cK()){cM(cE.current);br.run(cL);}else{cF();}}catch(cN){cH.setBounds(cH.rangeLoaded);cH.parseComplete();}}br.run(cL);};be.prototype.setBounds=function(cE){cE&&(this.rangeBounds=cE);this.raiseRangeLoadedEvent({range:n.empty,items:[],bounds:this.rangeBounds});};be.prototype.addEventListener=function(cE,cF){this.eventListeners[cE]=cF;};be.prototype.noResultsLoaded=function(){this.setBounds(n.empty);};be.prototype.setPropertyGroup=function(cE){this.propertyGroup=cE;if(cE){var cF=this;cE.addEventListener(function(){cF.propertyChanged.apply(cF,arguments);});cE.setCallMethodDelegate(this);}this.propertyGroupConnected();};be.prototype.propertyGroupConnected=function(){};be.prototype.propertyChanged=function(cE,cF,cG,cH){};var bO=false,aZ=true,bs="http://js.cooliris.com/",O=bk(bs+"layout/facebook.xslt"),aN=bs+"static/images/site.facebook.png",bl="http://www.facebook.com/",aW="jsfeed:"+bl+"home.php",aR=bs+"static/images/facebook.big.logo.jpg",bD=/(\d*)\/[anst](\d*_)/,bC=/(.*?_)[anst](\.\w+)/,aM="$1/a$2",aD="$1/n$2",h=location.protocol+"//"+location.host,cd=/.*?\/[anst](\d*)_(\d*)_(.*)/,cc=/.*?_(\d*)_(\d*)_\d*_?[anst]?\..*/,V='<?xml version="1.0" encoding="UTF-8"?><ci:feedData xmlns:ci="http://schemas.cooliris.com/layout/2008"><ci:navbar-link>'+aW+"</ci:navbar-link></ci:feedData>";function bH(cE){if(cE.match(bD)){return cE.replace(bD,"$1/a$2");}else{return cE.replace(bC,"$1a$2");}}function az(cE){if(cE.match(bD)){return cE.replace(bD,"$1/n$2");}else{return cE.replace(bC,"$1n$2");}}function bd(cF){var cE;if(cE=cF.match(cd)){return cE[1];}else{return cF.replace(cc,"$1");}}function cx(cF){var cE;if(cE=cF.match(cd)){return cE[2];}else{return cF.replace(cc,"$2");}}function bE(){return{xmlns$atom:y,atom$link:{rel:"pivot",href:aW},atom$logo:{$t:aN}};}function bZ(cE){this.parseURI(cE||location.href,true);}bZ.prototype=new a4();bZ.prototype.canonicalID=function(){var cE=a5(this.queryParameters,["id","pid"]);return bQ(cE)||" ";};function i(cF,cH,cG){if(cH&&(cH.isSessionOk&&!cH.isSessionOk(cF))){var cJ='<span>In order to access all of your Facebook photos in Cooliris, please <a href="'+bl+'">login</a> and try again.</span>',cE='<span><a href="'+bl+'">Sorry, you have been logged out of Facebook.</a></span>',cI={guid:{$t:bl},feedUrl:{$t:bl},contextinfo:{$xml:H(cJ)},media$description:{$xml:H(cE)},link:[{$t:bl},O],media$thumbnail:{url:aR},media$content:{url:aR},atom$source:bE()};cI=ae(cI);cH.addItem(cI);cH.parseComplete();}else{cG(cF);}}function bp(cE,cF){return function(cG){i(cG,cF,cE);};}var a0=function(){var cF=arguments,cE=(function(){if(!cF[6]&&typeof AsyncRequest==="function"){return function(cM,cI,cJ,cG,cK,cL,cH){(new AsyncRequest).setURI(cM).setReadOnly(true).setMethod("GET").setOption("suppressEvaluation",cL).setData(cI).setHandler(bp(cJ,cK)).setErrorHandler(bp(cG,cK)).setTransportErrorHandler(bp(cG,cK)).send();};}else{return function(cO,cL,cN,cJ,cM,cK,cI){var cH,cG=new a4();cG.pathname=cO;cG.queryParameters=cL;cG.hash="";cG=cG.toString();cH=function(cP){cP.getPayload=function(){if(!cP.fbData){var cR=cP.responseText;if(cR.indexOf("for")===0){cR=cR.substring(9);}try{if(!cK){cP.fbData=J("("+cR+")");aT(cP,cP.fbData);}}catch(cQ){}}return cK?cP:cP.payload;};bp(cN,cM)(cP);};q(cG,cH);};}})();cE.apply(null,arguments);};be.prototype.setBounds=function(cF){cF&&(this.rangeBounds=cF);if(cF&&cF.empty()){this.raiseRangeLoadedEvent({range:n.empty,items:[],bounds:this.rangeBounds});return;}else{var cE=this,cG={};cG.__a=this.pageState.__a;cG.reason="3";cG.iframe_loaded="true";a0("/ajax/presence/reconnect.php",cG,function(cH){},function(cH){},this);}};function b8(cE,cF){a0(cF,cE.pageState,function(cG){cE.asyncResponse(cG);},function(cG){cE.asyncResponseError(cG);},cE);}function ag(cI,cF,cG,cE,cH){a0(cI,cF,cG,cE,cH,true,true);}function aq(cF){var cG=new bZ(cF);var cE=cG.pathname;return(bX.feedUriForUri(cG)&&(cG.pathname==cE));}ay=function(cF,cE){if(window.setTimeout_native){return window.setTimeout_native(cF,cE);}else{return window.setTimeout(cF,cE);}};U=function(cF,cE){if(window.setInterval_native){return window.setInterval_native(cF,cE);}else{return window.setInterval(cF,cE);}};var w=["load","DOMNodeInserted"],bS,ct="on";function K(cG,cF,cE){cF=cF||document;cE=cE||w;if(cF.addEventListener){bS=cE.length;while(bS--){cF.addEventListener(cE[bS],cG,true);}}else{if(cF.attachEvent){bS=cE.length;while(bS--){cF.attachEvent(ct+cE[bS],cG);}}}}function bx(cG,cF,cE){cF=cF||document;cE=cE||w;if(cF.addEventListener){bS=cE.length;while(bS--){cF.removeEventListener(cE[bS],cG,true);}}else{if(cF.attachEvent){bS=cE.length;while(bS--){cF.detachEvent(ct+cE[bS],cG);}}}}function af(){}af.prototype.initialize=function(){var cE=this;K(function(){cE.reScan();});this.eventListeners=[];};af.prototype.register=function(){aL.registerService("pageHandler",this);this.raiseEvent("launchableChanged",this.canLaunch);};af.prototype.raiseEvent=function(cF,cE){bf().fire(cF,cE);};af.prototype.addEventListener=function(cE,cF){bf().addListener(cE,cF);};af.prototype.dispose=function(){};af.prototype.feedForUrl=function(cE){};af.prototype.parseContentFromDOM=function(){};af.prototype.reScan=function(){var cF=this,cE=function(){cF.domScannerTimer=null;cF.parseContentFromDOM();var cG=cF.canLaunch;cF.canLaunch=(!!cF.feedForUrl());if(cF.canLaunch!=cG){cF.raiseEvent("launchableChanged",cF.canLaunch);}};if(!this.domScannerTimer){this.domScannerTimer=window.setTimeout(cE,250);}};af.prototype.contentItemHandlerForUrl=function(cE){return this.propertyGroupHandlerForUrl(cE);};af.prototype.propertyGroupHandlerForUrl=function(cE){};af.prototype.canLaunch=function(){return !!this.elements.length;};function am(){}am.prototype=new be();am.prototype.parseResponse=function(cF,cE){this.parseComplete();};am.prototype.parseComplete=function(){var cE=this;br.run(function(){cE.loadContinuation();});};am.prototype.asyncResponse=function(cE){this.parseResponse(cE);};am.prototype.asyncResponseError=function(cE){this.noResultsLoaded();};am.prototype.loadContinuation=function(){var cF=this.rangeNeeded.intersect(this.rangeBounds);var cG=this.rangeLoaded.begin-cF.begin;var cE=cF.end-this.rangeLoaded.end;if(cE>=cG&&cE>0){cF.begin=this.rangeLoaded.end;cF.end=Math.min(this.rangeLoaded.end+this.ITEMS_PER_REQUEST,this.rangeBounds.end);}else{if(cG>cE&&cG>0){cF.begin=Math.max(this.rangeLoaded.begin-this.ITEMS_PER_REQUEST,this.rangeBounds.begin);cF.end=this.rangeLoaded.begin;}else{cF.begin=0;cF.end=0;}}if(cF.empty()){this.loading=false;return;}this.rangeToLoad=cF;this.makeAsyncRequest(cF);};am.prototype.startLoading=function(){this.loadContinuation();};am.prototype.makeAsyncRequest=function(cE){};am.prototype.loadRange=function(cE){if(this.rangeLoaded.empty()){bf().fire(j);}cE=new n(cE);cE=this.rangeBounds.intersect(cE);if(this.rangeLoaded.contains(cE)||this.rangeNeeded.contains(cE)){return;}this.rangeNeeded=cE;if(!this.loading){this.loading=true;this.startLoading();}};function bc(){}function ae(cG,cF){if(cF){cF=" "+cF;}else{cF=' xmlns:media="http://search.yahoo.com/mrss/"';}var cE={xml:l("item",cG,cF)};if(cG.feedUrl){cE.feedUrl=cG.feedUrl.$t;}return cE;}function ch(cE,cG){var cH=[];for(var cF=0;cF<cE.length;cF++){cH.push(ae(cE[cF],cG));}return cH;}function ac(cE){this.initialize();this.logo=aN;this.feedData=V;this.ITEMS_PER_REQUEST=20;this.parsedUri=cE;this.uri=cE.toString();}ac.prototype=new am();ac.prototype.startLoading=function(){if(this.parsedUri.pathname=="/photo.php"){if(this.parsedUri.currentPage){this.initializePageState(document);}else{var cE=this;ag("/photo.php",cE.parsedUri.queryParameters,function(cF){var cG=cF.htmlDocument||al(cF.getPayload().responseText);cE.initializePageState(cG);cE.loadContinuation();},function(cF){cE.asyncResponseError(cF);},this);return;}}else{this.initializePageState();}this.loadContinuation();};ac.prototype.initializePageState=function(cK){try{if(cK){var cL=bY(cK,"single_photo_header","div")[0],cH=cL.getElementsByTagName("a"),cF=cH.length,cG,cE;while(cF--){if(!(cE=cH[cF].href)){continue;}cG=new bZ(cE);switch(cG.pathname){case"/photo_search.php":case"/album.php":this.albumUri=cG;break;}}}else{this.albumUri=this.parsedUri;}var cJ={async:true};if(this.albumUri.pathname=="/photo_search.php"){cJ.view="global";this.albumUri.queryParameters.page=Math.floor(((this.albumUri.queryParameters.page||1)-1)*15/this.ITEMS_PER_REQUEST)+1;}this.pageState=aT(cJ,this.albumUri.queryParameters);this.pageState.page=(+this.pageState.page||1);this.rangeBounds.begin=-(this.pageState.page-1)*this.ITEMS_PER_REQUEST;}catch(cI){this.noResultsLoaded();}};ac.prototype.makeAsyncRequest=function(cE){this.pageState.page=1+(cE.begin-this.rangeBounds.begin)/this.ITEMS_PER_REQUEST;b8(this,this.albumUri.pathname);};function Y(cJ,cG){var cH=cG.getPayload().data,cE=0,cL=new bZ(cJ.albumUri);cL.queryParameters.page=cJ.pageState.page;var cK=cL.toString();var cI=this;function cF(cR){var cQ=cH[cE];cE+=cR;if(!cQ){delete cI.current;cI.EOF=(cH.length<20);return false;}var cO="?id="+cQ.id+"&pid="+cQ.pid;var cN=h+"/photo.php"+cO;var cM=document.createElement("span"),cU=document.createElement("span");cM.innerHTML=cQ.context_info;bM(cM,"br");cv(cM,aq,aZ);cU.innerHTML=cQ.tags.replace(/\s*\|(.*?)\)/g,")").replace(/(\(.*?href="#".*?\))/g,"");bM(cU,"script");cv(cU,aq,aZ);var cT=[],cV,cP=0;while(cV=cQ.photo_tags[cP++]){cT.push({x:cV[0],y:cV[1],name:cV[2].replace(cw,""),id:cV[3]});}var cS={guid:{$t:cO},feedUrl:{$t:cK},media$description:{$t:cQ.caption_plaintext},link:[{$t:cN},O],media$thumbnail:{url:bH(cQ.src)},media$content:{url:az(cQ.src)},contextinfo:{$xml:cj(cM)},tags:{$xml:cj(cU)},tagmetadata:cT,atom$source:bE()};cI.current=ae(cS);return true;}this.moveNext=function(){return cF(1);};this.movePrev=function(){return cF(-1);};this.moveLast=function(){cE=cH.length-1;};}ac.prototype.parseResponse=function(cE){this.parseResponseWithContinuation(new Y(this,cE));};ac.prototype.isSessionOk=function(cE){var cG=cE.getPayload(),cF;if(cG.responseText){cF=al(cG.responseText);cE.htmlDocument=cF;return !X(cF,"loginform");}else{return !(cE.error===1357001);}return true;};function cu(cE){this.initialize();this.logo=aN;this.feedData=V;this.ITEMS_PER_REQUEST=20;this.uri=cE.toString();this.parsedUri=cE;this.pageState=aT({view:"recent"},this.parsedUri.queryParameters);this.pageState.s=this.pageState.s?+this.pageState.s:0;this.rangeBounds.begin=-this.pageState.s;}cu.prototype=new am;cu.prototype.makeAsyncRequest=function(cE){this.pageState.s=cE.begin-this.rangeBounds.begin;b8(this,"/photos/ajax/index.php");};function au(cL,cF){var cK=al(cF.getPayload().html),cN=cK.getElementsByTagName("tr"),cM=0,cH=this,cI=0,cJ=new bZ(cL.parsedUri);cJ.queryParameters.s=cL.pageState.s;var cG=cJ.toString();function cE(){var cR=cN[cM++];metadatarow=cN[cM++];if(!cR){delete cH.current;if(cI<cL.ITEMS_PER_REQUEST){cH.EOF=true;}return false;}var cS=cR.getElementsByTagName("td"),cQ=metadatarow.getElementsByTagName("td"),cP=0;function cO(){var cU=cS[cP],cT=cQ[cP++];if(!cU){return cE();}cv(cT,aq,aZ);var cY=cU.getElementsByTagName("a")[0].href,cW=cT.getElementsByTagName("div"),cV=cU.getElementsByTagName("img")[0].src;var cX={guid:{$t:cY},feedUrl:{$t:cG},link:[{$t:cY},O],media$thumbnail:{url:bH(cV)},media$content:{url:az(cV)},album:{$xml:cj(cW[0])},author:{$xml:cj(cW[1])},atom$source:bE()};cH.current=ae(cX);cH.moveNext=cO;cI++;return true;}return cO();}cH.moveNext=cE;}au.prototype.xmlDOMParser=new a6();cu.prototype.parseResponse=function(cE){this.parseResponseWithContinuation(new au(this,cE));};cu.prototype.isSessionOk=function(cE){return !!cE.getPayload().html;};function bv(cE){this.initialize();this.logo=aN;this.feedData=V;this.ITEMS_PER_REQUEST=20;this.uri=this.albumUri=cE.toString();this.parsedUri=cE;this.pageState={id:cE.queryParameters.id,view:"global",page:cE.queryParameters.page,v:"photos",async:"true"};this.pageState.page=(+this.pageState.page||1);this.rangeBounds.begin=-(this.pageState.page-1)*this.ITEMS_PER_REQUEST;}bv.prototype=new am;bv.prototype.makeAsyncRequest=function(cJ){this.pageState.page=1+(cJ.begin-this.rangeBounds.begin)/this.ITEMS_PER_REQUEST;var cI=this,cH=function(){b8(cI,"/photo_search.php");};if(!this.pageState.id){var cG="http://"+this.parsedUri.hostname+this.parsedUri.pathname,cF=new bZ(),cE=function(cK){var cL=(cK.responseText||cK.payload.responseText).match(/PROFILE_OWNER_ID\s?=\s?"(\d+)"/);if(cL){cI.pageState.id=cL[1];cH();}else{cI.parseComplete();}};if(this.parsedUri.hostname===cF.hostname&&this.parsedUri.pathname===cF.pathname){this.pageState.id=window.PROFILE_OWNER_ID;cH();}else{ag(this.parsedUri.pathname,{},cE,function(cK){cI.asyncResponseError(cK);},this);}}else{cH();}};bv.prototype.parseResponse=function(cE){this.parseResponseWithContinuation(new Y(this,cE));};bv.prototype.isSessionOk=function(cE){return !(cE.error===1357001);};function D(cE){this.initialize();this.logo=aN;this.feedData=V;this.parsedUri=cE;this.rangeBounds=new n(0,1);this.uri=cE.toString();}D.prototype=new am();D.prototype.makeAsyncRequest=function(cF){var cE=this;ag("/profile.php",this.parsedUri.queryParameters,function(cG){cE.asyncResponse(cG);},function(cG){cE.asyncResponseError(cG);},this);};D.prototype.parseResponse=function(cE){try{var cH=cE.htmlDocument||al(cE.getPayload().responseText),cF=X(cH,"profile_pic").src;item={guid:{$t:this.parsedUri.queryParameters.id},link:[{$t:this.uri},O],type:{$t:"profile"},name:{$t:X(cH,"profile_name").innerHTML},media$thumbnail:{url:cF},profilestatus:{$xml:cj(cv(X(cH,"profile_status"),aq,aZ))},basicinfo:{$xml:cj(cv(X(cH,"basic_info_summary_box"),aq,aZ))},profileactions:{$xml:cj(cv(bY(cH,"profile_actions","div")[0],aq,aZ))},atom$source:bE()};this.addItem(ae(item));this.parseComplete();}catch(cG){this.noResultsLoaded();}};D.prototype.isSessionOk=function(cE){var cG=cE.getPayload(),cF;if(cG.responseText){cF=al(cG.responseText);cE.htmlDocument=cF;return !X(cF,"loginform");}else{return !(cE.error===1357001);}return true;};function cb(){return this;}cb.prototype=new af();cb.prototype.initialize=function(){aa(this,"initialize");this.parseContentFromDOM();this.register();return this;};cb.prototype.feedForPage=function(cE){this.feedUriForUri(cE);switch(cE.pathname){case"/album.php":case"/photo.php":return new ac(cE);case"/photos/":return new cu(cE);case"/profile.php":return new D(cE);case"/photo_search.php":return new bv(cE);case"/home.php":return new cu(cE);case"/":if(this.elements.length){cE.pathname="/home.php";return new cu(cE);}else{return null;}default:if(!cE.pathname.match(/\/.+?(\.php$|\/)/)){return new bv(cE);}else{return null;}}};cb.prototype.feedUriForUri=function(cE){switch(cE.pathname){case"/album.php":case"/photo.php":case"/photos/":case"/home.php":case"/photo_search.php":return cE;default:if(cE.pathname==="/profile.php"||!cE.pathname.match(/\/.+?(\.php$|\/)/)){if(!bO||(cE.queryParameters.v=="photos")){cE.queryParameters.page=Math.floor((cE.queryParameters.so||0)/20)+1;delete cE.queryParameters.so;if(cE.pathname==="/profile.php"){cE.pathname="/photo_search.php";}}return cE;}}return;};cb.prototype.hasFeedForPage=function(cE){return this.feedUriForUri(cE);};cb.prototype.feedForUrl=function(cE){return this.feedForPage(new bZ(cE));};cb.prototype.parseContentFromDOM=function(){this.lastScan=(new Date).getTime();var cE=[],cI=document.getElementsByTagName("A"),cR=0,cL,cF;while(cL=cI[cR++]){try{cF=bw(cL,"href");if(!cF||cF=="#"){continue;}if(cL.id&&cL.id.match(/icon_garden/)){continue;}var cH=this.feedUriForUri(new bZ(cL.href));if(cH){var cP=cH.toString();var cM=cL.getElementsByTagName("IMG");if(cM[0]&&!cM[0].className.match(/(spritemap_.*icons|fb_logo_img)/)){if(cL.id=="myphotolink"){cH.queryParameters.pid=cx(cM[0].src);cH.queryParameters.id=bd(cM[0].src);cH.implodeQueryString();cP=cH.toString();}var cK={element:cM[0],feedUri:cP,id:cH.canonicalID()};if(~cM[0].className.indexOf("UIRoundedImage_Image")&&cM[1]){cK.element=cM[1];cK.iconRect=z(cM[0],cM[1]);}cE.push(cK);}else{if(cL.parentNode.style.backgroundImage){var cQ=bY(cL,"UIMediaItem_PhotoFrame","DIV")[0],cK={element:cQ||cL,feedUri:cP,id:cH.canonicalID()};cK.iconRect=z(cL,cQ||cL);cE.push(cK);}}}else{var cJ=/http:\/\/www\.flickr\.com\/photos\/([^\/]+\/)([^\/]+\/)/,cG=cF.match(cJ),cO=cL.getElementsByTagName("IMG");if(cG&&cO){cK={element:cO[0],feedUri:"jsfeed:http://www.flickr.com/photos/"+cG[1]+"with/"+cG[2],id:cG[0]};cE.push(cK);}}}catch(cN){}}this.elements=cE;return this;};cb.prototype.spawnReScanWatchDog=function(){if(this.watchDogSpawned){return;}var cG=this,cI,cE=document.createElement("DIV"),cF=function(){if(cG.lastScan<cI){cG.initialize();}else{}document.body.removeChild(cE);},cH=function(){cI=(new Date).getTime();document.body.appendChild(cE);ay(cF,1200);};cE.style.display="none";this.watchDogSpawned=true;U(cH,15000);};function aB(cG,cF,cE){cG=Math.round(cG);cF=Math.round(cF);cE=(cE?Math.round(cE):0);this.updatePosition=function(){cG+=cE;if(cE<0){if(cG-cE*(cE-1)/2<cF){cE++;}else{if(cG-(cE-1)*(cE-2)/2>=cF){cE--;}}}else{if(cG+cE*(cE+1)/2>cF){cE--;}else{if(cG+(cE+1)*(cE+2)/2<=cF){cE++;}}}return cG;};this.changeTarget=function(cH){cF=Math.round(cH);};this.getPosition=function(){return cG;};this.getVelocity=function(){return cE;};this.hasStopped=function(){return(cG==cF&&cE==0);};}var aC=aL.queryService("stats"),e=location.href.replace(/"/,'\\"').replace(/\?.*/,""),ca="contextual_launch_events",b6="kContextualLaunchOpen",ak="kContextualLaunchClickToLaunch",bB="kContextualLaunchUserClose",g="kContextualLaunchTimeoutClose",b4="kContextualLaunchNeverShowAgain",bT="welcome_page_event",a1="kWelcomePageOpen",P="kWelcomePageLaunchCooliris",c="kLaunchDom",cn="kLaunchToolbar",F="kLaunchJavascript";function bK(cG){var cF=function(cH){aC.reportEvent(cG,"timestamp: "+(new Date).getTime()+' page_url: "'+e+'" type: '+cH);},cE=function(cK,cJ,cH){var cI=cK?a1:P;aC.reportEvent(cG,"timestamp: "+(new Date).getTime()+' welcome_page_url: "'+e+'"'+(cJ&&(" experiment_id: "+cJ))+(cH&&(" experiment_value: "+cH))+(cK&&(" launch_mode: "+cK))+" type: "+cI);};switch(cG){case ca:this.report=cF;break;case bT:this.report=cE;break;default:this.report=function(){};}}var b3=aL.queryService("cookieJar"),aG=location.hostname,cf=86400000,bA=3600000,at=60000,m=function(cF,cE){return b3.getCookie(cE||aG,cF);},a=function(cH,cG,cE,cF){b3.setCookie(cF||aG,cH,cE,""+cG);},cp=function(cH,cG,cF,cE){a(cH,cG,(new Date()).getTime()+(cf*cF),cE);},ax=function(cH,cG,cF,cE){a(cH,cG,(new Date()).getTime()+(bA*cF),cE);},b1=function(cH,cG,cE,cF){a(cH,cG,(new Date()).getTime()+(at*cE),cF);},bm=function(cH,cG,cF,cE){a(cH,cG,(new Date()).getTime()+(1000*cF),cE);},W=function(cF,cE){a(cF,cE,0,"");},aH=function(cG,cF,cE){a(cG,cF,-1,cE);},E=function(cF,cE){cp(cF,"0",-1,cE);m(cF);};var I="dontShowCL",bJ="hasLaunched",p="clManCloseCount",b0="dontShowCL-AC",R="tempDontShowCL",bh=aw(),L=aw(),bq=aw(),cq=aw(),av=aw(),bz=aw(),bI=aw(),aA=aw(),ce=aw(),aP=aw(),ah=aw(),bi=aw();var cy=m("com.cooliris.timeDebug")=="true";if(cy){cp=b1;W=function(cF,cE){b1(cF,cE,1);};aH=W;}function Q(){}Q.prototype.initCommonListeners=function(){this.initStatsListeners();this.initDisplayRuleListeners();var cE=this.cl;bf().addListener(av,function(){bf().fire(bi);});bf().addListener(aA,function(){aH(I,"1");bf().fire(bi);});bf().addListener(aP,function(){if(cE.hideBarTimer){window.clearInterval(cE.hideBarTimer);cE.hideBarTimer=0;}});bf().addListener(ah,function(){ay(function(){if(!cE.hideBarTimer){cE.hideBarTimer=ay(function(){bf().fire(av);},cE.hideBarDelay);}},1000);});};Q.prototype.initStatsListeners=function(){if(!this.stats){return;}var cE=this.stats;bf().addListener(av,function(){cE.report(g);});bf().addListener(bh,function(){cE.report(ak);});bf().addListener(aA,function(){cE.report(b4);});bf().addListener(cq,function(){cE.report(b6);});bf().addListener(L,function(){cE.report(bB);});};Q.prototype.initDisplayRuleListeners=function(){bf().addListener(j,function(){if("true"!=m(bU)){cp(bJ,"1",7);}});bf().addListener(cq,function(){var cE=m(p);cE=parseInt(cE,10);cE=cE?(cE<=0?0:cE-1):0;aH(p,cE);cp(R,"1",1);W(R,"1");});bf().addListener(L,function(){var cE=m(p)||0;cE=parseInt(cE,10);cE=2+cE;if(cE>2){cE=0;cp(b0,"1",14);}else{if(cE===2){cp(b0,"1",7);}}aH(p,cE);});};function bo(){this.disabled=false;this.hideBarDelay=10000;this.dictionary={go:{de:"Los",en:"GO",en_pi:"YARRR!",en_ud:"oƃ",es:"Iniciar",fr:"Lancer",it:"Vai",ja:"Coolirisを開く",nl:"GO",pl:"OK",pt:"OK",ru:"Нажми",tr:"Git",zh_cn:"开始",zh_hk:"開始"},turnThisOff:{de:"Abschalten",en:"Don't show this again",en_pi:"Keel haul this!",en_ud:"ɟɟo sıɥʇ uɹnʇ",es:"Cerrar esta ventana",fr:"Désactiver",it:"Disattiva",ja:"閉じる",nl:"Uitschakelen",pl:"Wyłącz",pt:"Desligar",ru:"отключите эту программу",tr:"Kapat",zh_cn:"关闭消息更新",zh_hk:"停止通知"}};this.dictionary.go.zh_sg=this.dictionary.go.zh_tw=this.dictionary.go.zh_hk;this.dictionary.go.zh=this.dictionary.go.zh_cn;this.dictionary.turnThisOff.zh_sg=this.dictionary.turnThisOff.zh_tw=this.dictionary.turnThisOff.zh_hk;this.dictionary.turnThisOff.zh=this.dictionary.turnThisOff.zh_cn;}bo.prototype.initElements=function(){if(this.disabled){return;}this.spacingDiv=document.createElement("DIV");this.launchUIDiv=document.createElement("DIV");this.launchUIDiv2=document.createElement("DIV");this.styleBlock=document.createElement("STYLE");};bo.prototype.attachElements=function(){if(!(this.spacingDiv&&this.launchUIDiv&&this.launchUIDiv2&&this.styleBlock)){return;}document.getElementsByTagName("HEAD")[0].appendChild(this.styleBlock);var cE=document.body.firstChild;document.body.insertBefore(this.spacingDiv,cE);document.body.appendChild(this.launchUIDiv2);document.body.appendChild(this.launchUIDiv);};bo.prototype.initStyleBlock=function(){if(!this.styleBlock){return;}var cE=this.styleBlock,cG=this.backgroundImage="http://js.cooliris.com/static/images/cl/v2/contextual-launch-balloon-style.png",cF='        div.launchUIDiv {             top:-64px;             height: 64px;             font-family:"Lucida Grande",Helvetica,Arial,sans-serif;             color:white;             overflow:hidden;             position: '+(an.ie?"absolute":"fixed")+";             z-index:9000001;        }         div.launchUIDiv a:focus{             outline:none; /*removes dotted line for ff */         }         div.launchUIDiv a:visited{             color:white;         }         .launchUIDiv#launchUIDiv1 {             width:100%;         }         #launchUIDiv2 {             width:90%;             background:url("+cG+") 0 448px repeat;             margin: 0px 50px 0px 30px;             overflow:hidden;         }         #launchUIDiv1 div {             float:left;             text-decoration:none;             overflow:hidden;         }         #launchUIDiv1 div a {             float:left;             height:45px;             text-decoration:none;             overflow:hidden;             color:white;         }         .launchUIDiv #leftBubble {             width:44px;             height:64px;             background:url("+cG+") 0 0 no-repeat;                  }         .launchUIDiv #textAndGo {             height:64px;             background:url("+cG+") 0 448px repeat;             padding: 7px 4px 0px 10px;         }         .launchUIDiv #mainText {             height:64px;             font-weight:normal;             font-size:15px;             padding-top:17px;             color: #CCCCCC;         }         .launchUIDiv #goButton {             height:64px;             color:black;         }         .launchUIDiv #goButton:visited{             color:black;         }         .launchUIDiv #goLeft {             width:20px;             height:39px;             margin-top:11px;             background:url("+cG+") -9px -210px no-repeat;         }         .launchUIDiv #goLeft.hover {             background-position: -9px -338px         }         .launchUIDiv #goMiddle {             height:39px;             margin-top:11px;             padding:7px 7px 0 5px;             font-weight:bold;             font-size:15px;             color:black;             background:url("+cG+")  0 750px repeat;         }         .launchUIDiv #goMiddle.hover {             background-position: 0px 622px         }         .launchUIDiv #goRight {             width:35px;             height:39px;             margin-top:11px;             background:url("+cG+")  -31px -210px no-repeat;         }         .launchUIDiv #goRight.hover {             background-position: -31px -338px         }         .launchUIDiv #rightBubble {             float:right;             height:64px;             width:54px;             background:url("+cG+") -27px -128px no-repeat;                      }         .launchUIDiv #xButton {             width:36px;             height:34px;             margin:20px 3px 0px 0px;             text-indent: -10000em;                      background:url("+cG+") 2px -468px no-repeat;         }         .launchUIDiv #xButton:hover {             background-position: -30px -468px;         }                  .launchUIDiv #stretchDiv {             float:right;             height:64px;             background:url("+cG+") 0 448px repeat;             text-align:right;         }         .launchUIDiv #turnOff {             height:20px             font-weight:normal;             font-size:12px;             padding-top:27px;             text-decoration:underline;             float:right;             color:#CCCCCC;         }         .launchUIDiv #turnOff:hover {             color: #2693C1;         }         .launchUIDiv #separatorPipe {             height:20px;             font-size:20px;             padding:22px 0px 0px 15px;             float:right;             font-weight:normal;             color: #737373;         }";cE.type="text/css";if(an.ie){cE.styleSheet.cssText=cF;}else{cE.appendChild(document.createTextNode(cF));}};bo.prototype.initDivs=function(){if(!(this.spacingDiv&&this.launchUIDiv&&this.launchUIDiv2&&this.styleBlock)){return;}var cO=this,cT=this.spacingDiv,cP=this.launchUIDiv,cF=this.launchUIDiv2;cT.style.width="100%";cT.style.height="64px";cT.style.margin="0px";cT.style.marginTop="-64px";cP.setAttribute("id","launchUIDiv1");cP.className="launchUIDiv";cF.setAttribute("id","launchUIDiv2");cF.className="launchUIDiv";cF.innerHTML='<img src="'+this.backgroundImage+'" /><iframe height="0" width="0" style="display:none;" src="http://js.cooliris.com/v/1/search/launchui/addLaunchUIDomain.html?d='+location.hostname+'"></iframe>';cP.innerHTML='    <div id="leftBubble"></div>     <div id="textAndGo">         <a id="mainText" href="#" class="ci_launchable">'+this.text.text+'</a>         <a id="goButton" href="#" class="ci_launchable">             <div id="goLeft" >&nbsp;</div>             <div id="goMiddle"> '+this.text.go+' </div>             <div id="goRight">&nbsp;</div>         </a>     </div>     <div id="rightBubble">         <a id="xButton" href="#"> X </a>      </div>     <div id="stretchDiv"><div id="separatorPipe">&nbsp;|&nbsp;</div><a id="turnOff" href="#">'+this.text.turnThisOff+"</a>    </div>";X(cP,"turnOff").onclick=function(){bf().fire(aA);return false;};var cH=ck(cP,"ci_launchable"),cN=function(){bf().fire(bh);return false;};cH[0].onclick=cN;cH[1].onclick=cN;var cL=X(cP,"goButton"),cI=function(cU){var cV=cL.children.length;while(cV--){cL.children[cV].className=cU;}};cL.onmouseover=function(){cI("hover");};cL.onmouseout=function(){cI("");};var cM=-64,cS,cJ,cE,cR,cQ=function(){cS=cJ.updatePosition();cT.style.marginTop=cS+"px";cP.style.top=cS+"px";cF.style.top=cS+"px";if(cJ.hasStopped()){window.clearInterval(cE);if(cR){bf().fire(cq);cO.hideBarTimer=ay(function(){bf().fire(av);},cO.hideBarDelay);}else{bf().fire(bI);}}},cG=function(){if(cO.launchUIDiv&&(!cO.launchUIDiv.style.top||cO.launchUIDiv.style.top.replace("px","")==cM)){cR=true;cJ=new aB(cM,0);cS=0;bf().fire(bq);cE=U(cQ,55);}},cK=function(){if(cO.launchUIDiv&&cR&&cO.launchUIDiv.style.top.replace("px","")==0){cR=false;cJ=new aB(0,cM);bf().fire(bz);cE=U(cQ,55);}};this.showBar=cG;this.hideBar=cK;X(cP,"xButton").onclick=function(){bf().fire(bi);bf().fire(L);return false;};cP.onmouseover=function(){bf().fire(aP);};cP.onmouseout=function(){bf().fire(ah);};};bo.prototype.initListeners=function(){if(!this.hideBar){return;}var cE=this;bf().addListener(bi,function(){if(cE.hideBarTimer){window.clearInterval(cE.hideBarTimer);cE.hideBarTimer=0;}cE.hideBar();});};bo.prototype.initCustomStuff=function(){};bo.prototype.initUIComponents=function(){if(this.disabled){return;}this.initElements();this.initStyleBlock();this.initDivs();this.initCustomStuff&&this.initCustomStuff();this.initListeners();this.attachElements();};bo.prototype.show=function(){if(this.disabled){return;}if(this.showBar&&this.hideBar){this.showBar();}};bo.prototype.removeUIComponents=function(){if(this.disabled){return;}this.launchUIDiv.parentNode.removeChild(this.launchUIDiv);this.launchUIDiv2.parentNode.removeChild(this.launchUIDiv2);this.spacingDiv.parentNode.removeChild(this.spacingDiv);this.styleBlock.parentNode.removeChild(this.styleBlock);delete this.launchUIDiv;delete this.launchUIDiv2;delete this.spacingDiv;delete this.styleBlock;};function ab(){this.hideBarTimer;this.dictionary.text={de:"Alle neuen Fotos deiner Freunde in der Cooliris 3D Wand anschauen",en:"See all of the new photos from your friends on the Cooliris 3D Wall",en_pi:"Avast! Sail by all o' th' new portraits from yer shipmates on th' Cooliris 3D Wall",en_ud:"llɐʍ p3 sıɹılooɔ ǝɥʇ uo spuǝıɹɟ ɹnoʎ ɯoɹɟ soʇoɥd ʍǝu ǝɥʇ ɟo llɐ ǝǝs",es:"Ve todas las fotos nuevas de tus amigos en la pared 3D de Cooliris",fr:"Voir toutes les nouvelles photos de vos amis sur le Mur 3D de Cooliris",it:"Vedi tutte le nuove foto dai tuoi amici sul muro 3D Cooliris",ja:"友達からの新しい写真をCoolirisの3D Wallで全部見る",nl:"Bekijk nieuwe foto's van je vrienden op de Cooliris 3D muur",pl:"Zobacz wszystkie najnowsze zdjęcia Twoich znajomych na trójwymiarowej ścianie Cooliris",pt:"Veja todas as novas fotos dos seus amigos na Parede 3D da Cooliris",ru:"Увидеть все новые фотографии своих друзей на трехмерной стене Cooliris",tr:"Arkadaşlarınızın yeni resimlerinin tümünü Cooliris 3 Boyutlu Duvar’da görüntüleyin",zh_cn:"用 Cooliris 的 3D 墙壁观赏朋友们新上载的照片",zh_hk:"用 Cooliris 的 3D 牆壁觀賞朋友們新上載的照片"};this.dictionary.text.zh_sg=this.dictionary.text.zh_tw=this.dictionary.text.zh_hk;this.dictionary.text.zh=this.dictionary.text.zh_cn;this.initLanguage();this.initUIComponents();}ab.prototype=new bo();ab.prototype.initLanguage=function(){var cG=document.body.className.match(/Locale_(([^_]{2})[^\s]*?)(\s|$)/),cE=cG[1]&&cG[1].toLowerCase(),cF=cG[2]&&cG[2].toLowerCase(),cH="en";if(this.dictionary.text[cE]){cH=cE;}else{if(this.dictionary.text[cF]){cH=cF;}}this.text={text:this.dictionary.text[cH],go:this.dictionary.go[cH],turnThisOff:this.dictionary.turnThisOff[cH]};};function bG(){this.hideBarDelay;}bG.prototype=new bo();bG.prototype.initUIComponents=function(){};bG.prototype.show=function(){bf().fire(cq);};bG.prototype.hideBar=function(){};function bF(){}bF.prototype.evaluateCommonRules=function(){return this.launchUIEnabled()&&this.checkActiveCloseRules()&&this.checkDisplayFrequency()&&this.checkOrganicLaunchBehavior();};bF.prototype.launchUIEnabled=function(){var cE=m(I)!=="1";return cE;};bF.prototype.checkActiveCloseRules=function(){var cE=m(b0)!=="1";return cE;};bF.prototype.checkDisplayFrequency=function(){var cE=m(R)!=="1";return cE;};bF.prototype.checkOrganicLaunchBehavior=function(){var cE=m(bJ)!=="1";if(cE){E(R);E(b0);E(p);}return cE;};function ba(){}ba.prototype=new bF();ba.prototype.evaluateRules=function(cE){return this.urlLaunchUIEnabled(cE)&&this.evaluateCommonRules();};ba.prototype.urlLaunchUIEnabled=function(cF){var cG=new bZ(cF),cE=!!cG.pathname.match(/^\/home.php/);return cE;};var a7=aw(),bU="clBarLaunch",ap="clV2Init";function aO(){if(an.ie){return;}this.policy=new ba();this.stats=new bK(ca);if(!m(ap)){aH(ap,"1");cp(bJ,"1",5);}var cG=aL.queryService("experiments"),cF=cy?"show-bar":(cG.getExperimentValue("fb-launch-ui")||"none"),cE;switch(cF){case"none":cE=new bG();break;case"show-bar":cE=new ab();break;default:return;}this.cl=cE;this.initListeners();}aO.prototype=new Q();aO.prototype.initListeners=function(){if(!this.cl||this.listenersInitialized){return;}else{this.listenersInitialized=true;}this.initCommonListeners();var cE=this.cl,cF=this.stats,cG=this;bf().addListener(bh,function(){W(bU,"true");aL.launch("","","");ay(function(){bf().fire(bi);},500);});bf().addListener(a7,function(cH){if(cG.policy.evaluateRules(cH)){cE.show();}else{bf().fire(bi);}});(function(){var cI="",cH=function(){var cJ=new bZ(),cK=cJ.toString();if(cI!==cK){cI=cK;bf().fire(a7,[cJ]);}ay(cH,2000);};ay(cH,1000);})();};var bX=new cb();bX.initialize();bX.register();bX.spawnReScanWatchDog();var b7=new aO();})();