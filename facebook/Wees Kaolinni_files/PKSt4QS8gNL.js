/*!CK:3662463893!*//*1397438474,178134361*/

if (self.CavalryLogger) { CavalryLogger.start_js(["b6m8M"]); }

__d("DocumentSelectionState",["mixInEventEmitter"],function(a,b,c,d,e,f,g){function h(i,j){"use strict";this.$DocumentSelectionState0=i;this.$DocumentSelectionState1=j;this.$DocumentSelectionState2=false;}h.prototype.update=function(i,j){"use strict";if(this.$DocumentSelectionState0!==i||this.$DocumentSelectionState1!==j){this.$DocumentSelectionState0=i;this.$DocumentSelectionState1=j;this.emit('update');}};h.prototype.constrainLength=function(i){"use strict";this.update(Math.min(this.$DocumentSelectionState0,i),Math.min(this.$DocumentSelectionState1,i));};h.prototype.focus=function(){"use strict";if(!this.$DocumentSelectionState2){this.$DocumentSelectionState2=true;this.emit('focus');}};h.prototype.blur=function(){"use strict";if(this.$DocumentSelectionState2){this.$DocumentSelectionState2=false;this.emit('blur');}};h.prototype.hasFocus=function(){"use strict";return this.$DocumentSelectionState2;};h.prototype.isCollapsed=function(){"use strict";return this.$DocumentSelectionState0===this.$DocumentSelectionState1;};h.prototype.isBackward=function(){"use strict";return this.$DocumentSelectionState0>this.$DocumentSelectionState1;};h.prototype.getAnchorOffset=function(){"use strict";return this.$DocumentSelectionState2?this.$DocumentSelectionState0:null;};h.prototype.getFocusOffset=function(){"use strict";return this.$DocumentSelectionState2?this.$DocumentSelectionState1:null;};h.prototype.getStartOffset=function(){"use strict";return (this.$DocumentSelectionState2?Math.min(this.$DocumentSelectionState0,this.$DocumentSelectionState1):null);};h.prototype.getEndOffset=function(){"use strict";return (this.$DocumentSelectionState2?Math.max(this.$DocumentSelectionState0,this.$DocumentSelectionState1):null);};h.prototype.overlaps=function(i,j){"use strict";return (this.hasFocus()&&this.getStartOffset()<=j&&i<=this.getEndOffset());};g(h,{blur:true,focus:true,update:true});e.exports=h;});
__d("TextEditorCompositionState",["mixInEventEmitter"],function(a,b,c,d,e,f,g){function h(i){"use strict";this.$TextEditorCompositionState0=i;}h.prototype.startSession=function(){"use strict";this.$TextEditorCompositionState0=true;this.emit('change');};h.prototype.continueSession=function(){"use strict";this.$TextEditorCompositionState0=true;};h.prototype.pauseSession=function(){"use strict";this.$TextEditorCompositionState0=false;};h.prototype.terminateSession=function(){"use strict";this.$TextEditorCompositionState0=false;this.emit('change');};h.prototype.inCompositionSession=function(){"use strict";return this.$TextEditorCompositionState0;};g(h,{change:true});e.exports=h;});
__d("AbstractTextEditorPlaceholder.react",["DocumentSelectionState","React","TextEditorCompositionState","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.PropTypes,l=h.createClass({displayName:'AbstractTextEditorPlaceholder',propTypes:{text:k.string.isRequired,selectionState:k.instanceOf(g).isRequired,compositionState:k.instanceOf(i).isRequired},getInitialState:function(){return {hasFocus:this.props.selectionState.hasFocus(),currentlyComposing:this.props.compositionState.inCompositionSession()};},componentWillMount:function(){this._listeners=[this.props.selectionState.addListener('blur',function(){this.setState({hasFocus:false});}.bind(this)),this.props.selectionState.addListener('focus',function(){this.setState({hasFocus:true});}.bind(this)),this.props.compositionState.addListener('change',function(){this.setState({currentlyComposing:this.props.compositionState.inCompositionSession()});}.bind(this))];},componentWillUnmount:function(){this._listeners.forEach(function(m){return m.remove();});this._listeners=null;},shouldComponentUpdate:function(m,n){return (n.hasFocus!==this.state.hasFocus||n.currentlyComposing!==this.state.currentlyComposing);},render:function(){var m=((this.state.currentlyComposing?"_kox":'')+(' '+"_5ywb")+(this.state.hasFocus?' '+"_5ywc":''));return (h.DOM.div({className:m},this.props.text));}});e.exports=l;});
__d("DocumentCharacters",[],function(a,b,c,d,e,f){var g={BLOCK_DELIMITER:'\u000D',SOFT_NEWLINE:'\u000A',PHOTO:'\ud83d\udcf7'};e.exports=g;});
__d("DocumentIterator",["DocumentCharacters"],function(a,b,c,d,e,f,g){var h=g.BLOCK_DELIMITER;function i(j,k){"use strict";this.$DocumentIterator0=j;this.$DocumentIterator1=k;}i.prototype.process=function(j,k,l){"use strict";this.$DocumentIterator2=j;this.$DocumentIterator3=k;this.$DocumentIterator4=l;this.$DocumentIterator5=this.$DocumentIterator0.getText();this.$DocumentIterator6=this.$DocumentIterator0.getInlineStyles();this.$DocumentIterator7=this.$DocumentIterator1.getDecorations(this.$DocumentIterator0);this.$DocumentIterator8();};i.prototype.$DocumentIterator8=function(){"use strict";var j=this.$DocumentIterator5.split(h),k=0,l;for(var m=0;m<j.length;m++){l=k+j[m].length;this.$DocumentIterator9(k,l);k=l+h.length;}};i.prototype.$DocumentIterator9=function(j,k){"use strict";this.$DocumentIterator2.call(null,j,k);this.$DocumentIteratora(this.$DocumentIterator7,j,k,this.$DocumentIteratorb.bind(this));};i.prototype.$DocumentIteratorb=function(j,k,l){"use strict";this.$DocumentIterator3.call(null,j,k,l);this.$DocumentIteratora(this.$DocumentIterator6,j,k,this.$DocumentIteratorc.bind(this));};i.prototype.$DocumentIteratorc=function(j,k,l){"use strict";this.$DocumentIterator4.call(null,j,k,l);};i.prototype.$DocumentIteratora=function(j,k,l,m){"use strict";var n=k;for(var o=k;o<l;o++)if(j[o]!==j[o+1]){m(n,o+1,j[n]);n=o+1;}if(k===l){m(k,l,null);}else if(n!==l)m(n,l,j[n]);};e.exports=i;});
__d("DocumentOffsetCache",[],function(a,b,c,d,e,f){function g(i){return i<0?0:i;}function h(){"use strict";this.reset();}h.prototype.reset=function(){"use strict";this.$DocumentOffsetCache0=-1;this.$DocumentOffsetCache1=-1;this.$DocumentOffsetCache2=-1;this.$DocumentOffsetCache3={};};h.prototype.nextBlock=function(i){"use strict";this.$DocumentOffsetCache0++;this.$DocumentOffsetCache1=-1;this.$DocumentOffsetCache2=-1;this.$DocumentOffsetCache4(i);};h.prototype.nextDecoration=function(i){"use strict";this.$DocumentOffsetCache1++;this.$DocumentOffsetCache2=-1;this.$DocumentOffsetCache4(i);};h.prototype.nextLeaf=function(i){"use strict";this.$DocumentOffsetCache2++;this.$DocumentOffsetCache4(i);};h.prototype.getCurrentKey=function(){"use strict";return g(this.$DocumentOffsetCache0)+'.'+g(this.$DocumentOffsetCache1)+'.'+g(this.$DocumentOffsetCache2);};h.prototype.getOffset=function(i){"use strict";return this.$DocumentOffsetCache3[i];};h.prototype.getKey=function(i){"use strict";var j=null,k=null;for(var l in this.$DocumentOffsetCache3){var m=this.$DocumentOffsetCache3[l],n=i-m;if(n<0){continue;}else if(n===0){return l;}else if(n<j||j===null){j=n;k=l;}}return k;};h.prototype.$DocumentOffsetCache4=function(i){"use strict";this.$DocumentOffsetCache3[this.getCurrentKey()]=i;};e.exports=h;});
__d("DocumentView",["DocumentIterator","DocumentOffsetCache","UnicodeBidi","createArrayFrom","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m,n){"use strict";this.$DocumentView0=m;this.$DocumentView1=n;this.$DocumentView2=[];this.$DocumentView3=null;this.$DocumentView4=[];this.$DocumentView5=new g(this.$DocumentView0,this.$DocumentView1);this.$DocumentView6=new h(this.$DocumentView5);}l.prototype.getContent=function(){"use strict";return this.$DocumentView0;};l.prototype.getText=function(){"use strict";return this.$DocumentView0.getText();};l.prototype.getEntities=function(){"use strict";return this.$DocumentView0.getEntities();};l.prototype.getFragment=function(m,n){"use strict";return this.$DocumentView0.getFragment(m,n);};l.prototype.getVersion=function(){"use strict";return this.$DocumentView0.getVersion();};l.prototype.getBlockDirections=function(){"use strict";this.$DocumentView7();return this.$DocumentView4;};l.prototype.getFingerprint=function(){"use strict";this.$DocumentView7();return this.$DocumentView2.join(':');};l.prototype.getOffset=function(m){"use strict";this.$DocumentView7();return this.$DocumentView6.getOffset(m);};l.prototype.getKey=function(m){"use strict";this.$DocumentView7();return this.$DocumentView6.getKey(m);};l.prototype.iterate=function(m,n,o){"use strict";this.$DocumentView3=this.getVersion();this.$DocumentView2.length=0;this.$DocumentView4.length=0;this.$DocumentView6.reset();var p=this.$DocumentView6,q=this.$DocumentView1,r=0,s=this.$DocumentView0.getBlockStyles(),t=this.$DocumentView8.bind(this),u=this.$DocumentView9.bind(this);function v(y,z){p.nextBlock(y);u(y,z);m(p.getCurrentKey(),y,z,s[r++]);}function w(y,z,aa){var ba=null;p.nextDecoration(y);if(aa!==null){t("D",aa,z-y);ba=q.getComponentForKey(aa);}n(p.getCurrentKey(),y,z,ba);}function x(y,z,aa){p.nextLeaf(y);t("L",aa);o(p.getCurrentKey(),y,z,aa);}this.$DocumentView5.process(v,w,x);};l.prototype.$DocumentView7=function(){"use strict";if(this.$DocumentView3!==this.getVersion())this.iterate(k,k,k);};l.prototype.$DocumentView8=function(){"use strict";this.$DocumentView2.push(j(arguments).join('-'));};l.prototype.$DocumentView9=function(m,n){"use strict";var o=this.$DocumentView0.getText().slice(m,n),p=this.$DocumentView4,q=i.getDirection(o,p[p.length-1]);this.$DocumentView4.push(q);};e.exports=l;});
__d("AbstractTextEditorProps",["DocumentSelectionState","DocumentView","ReactPropTypes"],function(a,b,c,d,e,f,g,h,i){var j={propTypes:{documentView:i.instanceOf(h).isRequired,selectionState:i.instanceOf(g).isRequired,placeholder:i.string,blockStyleFn:i.func.isRequired,inlineStyleFn:i.func.isRequired,keyBindingFn:i.func.isRequired,spellCheck:i.bool,onBackspace:i.func.isRequired,onReturn:i.func.isRequired,onEscape:i.func,onTab:i.func,onUpArrow:i.func,onDownArrow:i.func,onCharacters:i.func.isRequired,onAlter:i.func.isRequired,onCut:i.func.isRequired,onPasteFragment:i.func.isRequired,onPasteFiles:i.func,onDelete:i.func.isRequired,onDropSelection:i.func.isRequired,onDropText:i.func.isRequired,onDropFiles:i.func,onSelect:i.func.isRequired,onBlur:i.func.isRequired,onFocus:i.func.isRequired},getDefaultProps:function(){return {spellCheck:false};}};e.exports=j;});
__d("DocumentStyles",[],function(a,b,c,d,e,f){var g={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4},h={UNSTYLED:0,UNORDERED_LI:1,ORDERED_LI:2,BLOCKQUOTE:3,HEADER_ONE:4,HEADER_TWO:5};e.exports={INLINE:g,BLOCK:h};});
__d("TextEditorBlock.react",["UnicodeBidiDirection","ReactPropTypes","React","cx","joinClasses","mergeInto"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.LTR,n=g.RTL,o=i.createClass({displayName:'TextEditorBlock',propTypes:{offsetKey:h.string.isRequired,text:h.string.isRequired,blockProps:h.object,blockStyleFn:h.func.isRequired,style:h.number,direction:h.string.isRequired},render:function(){var p=k(this.props.blockStyleFn(this.props.style),((this.props.direction===m?"_186j":'')+(this.props.direction===n?' '+"_186k":''))),q={style:{position:'relative'},'data-offset-key':this.props.offsetKey,className:p};l(q,this.props.blockProps);return i.DOM.div(q,this.props.children);}});e.exports=o;});
__d("binarySearch",[],function(a,b,c,d,e,f){function g(h,i){var j=0,k=h.length-1;while(j<=k){var l=Math.floor((k+j)/2),m=i(h[l],l);if(m===0)return l;if(m>0){k=l-1;}else j=l+1;}return -1;}e.exports=g;});
__d("DocumentSelection",["binarySearch"],function(a,b,c,d,e,f,g){var h='Start',i='End';function j(y,z){var aa=document.selection,ba=aa.createRange(),ca=ba.text,da=k(y,ba,h),ea=da;if(da!==null&&ca.length>0)ea=k(y,ba,i);if(da&&ea){z(da.key,da.offset,ea.key,ea.offset);}else z(null,null,null,null);}function k(y,z,aa){var ba=z.duplicate(),ca=function(fa){ba.moveToElementText(fa);return l(ba,z,aa);};while(y&&y.childNodes){var da=g(y.childNodes,ca);if(da===-1)break;y=y.childNodes[da];var ea=p(y);if(ea!==null){ba.moveToElementText(y);ba.setEndPoint('EndTo'+aa,z);return {key:ea,offset:ba.text.length};}}return null;}function l(y,z,aa){if(y.compareEndPoints('StartTo'+aa,z)==1){return 1;}else if(y.compareEndPoints('EndTo'+aa,z)==-1){return -1;}else return 0;}function m(y,z){var aa=a.getSelection();if(aa.rangeCount===0){z(null,null,null,null);return;}var ba=aa.anchorNode,ca=aa.focusNode;if(ba.nodeType===Node.TEXT_NODE||ca.nodeType===Node.TEXT_NODE||ba!==ca){z(q(ba),aa.anchorOffset,q(ca),aa.focusOffset);return;}var da,ea,fa=Math.min(aa.anchorOffset,aa.focusOffset),ga=Math.max(aa.anchorOffset,aa.focusOffset);if(!ca.firstChild){ea=q(ca);z(ea,0,ea,0,true);}else if(fa!=ga){var ha=n(ca.childNodes[fa]),ia=p(ha),ja=o(ca.childNodes[ga-1]),ka=p(ja),la=ja.textContent.length;z(ia,0,ka,la,true);}else if(fa===0){da=n(ba);ea=p(da);z(ea,0,ea,0,da!==ba);}else{da=o(ba);ea=p(da);z(ea,la,ea,da.textContent.length,da!==ba);}}function n(y){while(y.firstChild&&p(y.firstChild))y=y.firstChild;return y;}function o(y){while(y.lastChild&&p(y.lastChild))y=y.lastChild;return y;}function p(y){return y.getAttribute&&y.getAttribute('data-offset-key');}function q(y){while(y!==document.documentElement){var z=p(y);if(z!=null)return z;y=y.parentNode;}return null;}function r(y,z,aa){return (y>=z&&y<=aa);}function s(y,z,aa){return (y>=z&&y<=aa);}function t(y,z,aa,ba){var ca=Math.min(y.anchor,y.focus),da=Math.max(y.anchor,y.focus),ea=r(ca,aa,ba),fa=s(da,aa,ba),ga=document.selection.createRange().duplicate();if(ea){ga.moveToElementText(z.parentNode);ga.moveStart('character',ca-aa);ga.setEndPoint('EndToStart',ga);ga.select();}if(fa){ga.moveEnd('character',da-ca);ga.select();}}function u(y,z,aa,ba){var ca=a.getSelection(),da=y.anchor,ea=y.focus;if(!ca.extend&&ea<da){var fa=da;da=ea;ea=fa;}var ga=r(da,aa,ba),ha=s(ea,aa,ba);if(ga&&ha){ca.removeAllRanges();w(ca,z,da-aa);v(ca,z,ea-aa);return;}if(da<ea){if(ga){ca.removeAllRanges();w(ca,z,da-aa);}if(ha)v(ca,z,ea-aa);}if(ea<da){if(ha){ca.removeAllRanges();w(ca,z,ea-aa);}if(ga){var ia=ca.focusNode,ja=ca.focusOffset;ca.removeAllRanges();w(ca,z,da-aa);v(ca,ia,ja);}}}function v(y,z,aa){if(y.extend){y.extend(z,aa);}else{var ba=y.getRangeAt(0);ba.setEnd(z,aa);y.addRange(ba.cloneRange());ba.detach();}}function w(y,z,aa){var ba=document.createRange();ba.setStart(z,aa);y.addRange(ba);ba.detach();}var x={get:function(y,z){if(document.selection){j(y,z);}else m(y,z);},set:function(y,z,aa,ba){if(document.selection){t(y,z,aa,ba);}else u(y,z,aa,ba);},findOffsetKey:q};e.exports=x;});
__d("TextEditorTextNode.react",["DOMPropertyOperations","ReactBrowserComponentMixin","ReactComponent","ReactDescriptor","UserAgent","escapeTextForBrowser","getTextContentAccessor","mixInto"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k.ie()<=11,p=i.BackendIDOperations,q=m();function r(y){return o?y[q]==='\n':y.tagName==='BR';}function s(y){p.dangerouslyReplaceNodeWithMarkupByID(y,o?v(y):u(y));}function t(y,z){if(o){p.updateTextContentByID(y,z);}else p.dangerouslyReplaceNodeWithMarkupByID(y,w(y,z));}function u(y){return '<br '+g.createMarkupForID(y)+' />';}function v(y){return w(y,'\n');}function w(y,z){return ('<span '+g.createMarkupForID(y)+'>'+l(z)+'</span>');}var x=function(y){this.construct(y);};n(x,i.Mixin);n(x,h);n(x,{mountComponent:function(y,z,aa){i.Mixin.mountComponent.call(this,y,z,aa);if(this.props==='')return (o?v(y):u(y));return w(y,this.props);},receiveComponent:function(y,z){var aa=this._rootNodeID,ba=y.props,ca=this.getDOMNode();if(r(ca)){if(ba!==''){this.props=ba;t(aa,ba);}return;}if(ba===''){this.props=ba;s(aa);return;}var da=this.getDOMNode()[q];if(ba!==da)p.updateTextContentByID(aa,ba);},type:x});e.exports=j.createFactory(x);});
__d("TextEditorLeaf.react",["DocumentCharacters","DocumentSelection","DocumentSelectionState","DocumentView","ReactPropTypes","React","TextEditorTextNode.react","endsWith"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=g.BLOCK_DELIMITER,p=g.SOFT_NEWLINE,q=3,r=l.createClass({displayName:'TextEditorLeaf',propTypes:{offsetKey:k.string.isRequired,styleFn:k.func.isRequired,documentView:k.instanceOf(j).isRequired,selectionState:k.instanceOf(i).isRequired,text:k.string.isRequired,style:k.number.isRequired},_setSelection:function(){var s=this.props.selectionState,t=this.props.documentView.getOffset(this.props.offsetKey),u=t+this.props.text.length;if(s.hasFocus()&&s.overlaps(t,u)){var v={anchor:s.getAnchorOffset(),focus:s.getFocusOffset()},w=this.getDOMNode(),x=w.firstChild,y;if(x.nodeType===q){y=x;}else if(x.tagName==='BR'){y=w;}else y=x.firstChild;h.set(v,y,t,u);}},componentDidUpdate:function(){this._setSelection();},componentDidMount:function(){this._setSelection();},render:function(){var s=this.props.text;if(n(s,p)){var t=this.props.documentView.getOffset(this.props.offsetKey),u=this.props.documentView.getContent().getText(),v=u[t+s.length];if(v===undefined||v===o)s+=p;}return (l.DOM.span({className:this.props.styleFn(this.props.style),'data-offset-key':this.props.offsetKey},new m(s)));}});e.exports=r;});
__d("isSelectionAtLeafStart",[],function(a,b,c,d,e,f){function g(h,i){var j=i.getStartOffset(),k=h.getKey(j);return h.getOffset(k)===j;}e.exports=g;});
__d("TextEditorCompositionHandler",["Keys","isSelectionAtLeafStart"],function(a,b,c,d,e,f,g,h){var i={onBeforeInput:function(j){this._textInputData=(this._textInputData||'')+j.data;},onCompositionStart:function(){this._compositionState.continueSession();},onCompositionEnd:function(j){this._compositionState.pauseSession();setTimeout(i.resolveComposition.bind(this),0);},onKeyDown:function(j){if(j.which===g.RIGHT||j.which===g.LEFT)j.preventDefault();},onKeyPress:function(j){if(j.which===g.RETURN)j.preventDefault();},resolveComposition:function(){if(this._compositionState.inCompositionSession())return;var j=this._textInputData;this._textInputData='';this._compositionState.terminateSession();var k=!j||h(this.props.documentView,this.props.selectionState);if(k)this.restoreEditorDOM();this.exitCurrentMode();this.removeRenderGuard();if(j){this.props.onCharacters(j);}else if(k){this.resetRenderedVersion();this.forceUpdate();}}};e.exports=i;});
__d("TextEditorModes",[],function(a,b,c,d,e,f){var g={EDIT:0,COMPOSITE:1,DRAG:2,RENDER:3,CUT:4};e.exports=g;});
__d("fillArray",[],function(a,b,c,d,e,f){function g(h,i){var j=new Array(h);for(var k=0;k<h;k++)j[k]=i;return j;}e.exports=g;});
__d("getChangedCharactersFromMutation",[],function(a,b,c,d,e,f){function g(k,l){var m=Math.min(k.length,l.length),n=m,o=m,p;for(p=0;p<m;p++)if(k.charAt(p)!==l.charAt(p)){n=p;break;}for(p=0;p<m;p++)if(k.charAt(k.length-p-1)!==l.charAt(l.length-p-1)){o=p;break;}return {prefix:n,suffix:o};}function h(k,l,m){for(var n=0;n<m;n++)if(l.charAt(k.prefix-1).match(/^\s?$/)){k.suffix--;}else k.prefix--;}function i(k,l){return k.substr(l.prefix,k.length-l.prefix-l.suffix);}function j(k){var l,m;if(k.length===3){l=k[1];m=k[2];}else if(k.length===2){l=k[0];m=k[1];}else return;if(l.target!==m.target)return;var n=l.oldValue,o=m.oldValue,p=m.target.data;if(p!==n&&p.length>o.length&&n.length>o.length){var q=g(n,o),r=g(p,o),s=q.prefix<r.prefix?q:r,t=n.length-s.prefix-s.suffix,u=n.length-o.length;h(s,n,u-t);return {node:m.target,offset:s.prefix,oldText:i(n,s),newText:i(p,s)};}}e.exports=j;});
__d("TextEditorEditHandler",["DataTransfer","DocumentCharacters","DocumentSelection","DocumentStyles","Keys","TextEditorModes","fillArray","getChangedCharactersFromMutation","isSelectionAtLeafStart"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.BLOCK_DELIMITER,q=h.SOFT_NEWLINE,r=j.INLINE.NONE,s=j.BLOCK.UNSTYLED;function t(v,w){var x=v.selectionState;if(!x.isCollapsed()){var y=x.getStartOffset(),z=x.getEndOffset();w(v.documentView.getFragment(y,z),y,z);}}var u={onBeforeInput:function(v){var w=v.data;if(!w)return;var x=this.props.documentView,y=this.props.selectionState;if(y.isCollapsed()&&!o(x,y)){var z=x.getFingerprint();this.props.onCharacters(w);if(z===x.getFingerprint()){this.expectDuplicateMutation();return;}}else this.props.onCharacters(w);v.preventDefault();},onKeyDown:function(v){var w=v.nativeEvent.keyCode;switch(w){case k.RETURN:v.preventDefault();this.props.onReturn(v);return;case k.ESC:v.preventDefault();this.props.onEscape&&this.props.onEscape(v);return;case k.TAB:this.props.onTab&&this.props.onTab(v);return;case k.UP:this.props.onUpArrow&&this.props.onUpArrow(v);return;case k.DOWN:this.props.onDownArrow&&this.props.onDownArrow(v);return;}var x=this.props.keyBindingFn.call(null,v);if(x){v.preventDefault();this.props.onKeyCommand(x);}},normalizeAndHandleSelect:function(v,w,x,y,z){if(v!==null&&w!==null)w+=this.props.documentView.getOffset(v);if(x!==null&&y!==null)y+=this.props.documentView.getOffset(x);if(w&&z)this.resetRenderedVersion();this.props.onSelect(w,y,!!z);},onSelect:function(v){i.get(this.refs.editorContainer.getDOMNode().firstChild,u.normalizeAndHandleSelect.bind(this));},onBlur:function(v){this.props.onBlur(v);},onFocus:function(v){this.props.onFocus(v);},onCharacterData:function(v){var w=n(v);if(w){var x=i.findOffsetKey(w.node),y=this.props.documentView.getOffset(x);this.props.onAlter(y+w.offset,w.oldText,w.newText);}},onDragStart:function(v){this._internalDrag=true;this.setMode(l.DRAG);},onDragOver:function(v){this._internalDrag=false;this.setMode(l.DRAG);v.preventDefault();},onCompositionStart:function(v){this.setRenderGuard();this.captureEditorDOM();this.setMode(l.COMPOSITE);this._compositionState.startSession();},onCut:function(v){if(this.props.selectionState.isCollapsed()){v.preventDefault();return;}this.setRenderGuard();this.captureEditorDOM();t(this.props,function(w,x,y){this._clipboard=w;this.setMode(l.CUT);setTimeout(function(){this.restoreEditorDOM();this.removeRenderGuard();this.exitCurrentMode();this.props.onCut(x,y);}.bind(this),0);}.bind(this));},onCopy:function(v){t(this.props,function(w){this._clipboard=w;}.bind(this));},onPaste:function(v){v.preventDefault();var w=new g(v.clipboardData);if(!w.isRichText()){var x=w.getFiles();if(x.length>0){this.props.onPasteFiles&&this.props.onPasteFiles(x);return;}}var y=w.getText();if(y)y=y.replace(new RegExp(q,'g'),p);if(this._clipboard&&y===this._clipboard.text){this.props.onPasteFragment(this._clipboard);return;}this._clipboard=null;this.props.onPasteFragment({text:y,inlines:m(y.length,r),blocks:m(y.split(p).length,s)});}};e.exports=u;});
__d("TextEditorDragHandler",["DataTransfer"],function(a,b,c,d,e,f,g){function h(j,event){var k,l;if(document.caretRangeFromPoint){var m=document.caretRangeFromPoint(event.x,event.y);k=m.startContainer;l=m.startOffset;}else if(event.rangeParent){k=event.rangeParent;l=event.rangeOffset;}if(k){var n=document.createRange();n.setStart(j,0);n.setEnd(k,l);var o=n.toString().length;n.detach();return o;}}var i={onDragEnd:function(){this.exitCurrentMode();},onDrop:function(j){var k=new g(j.nativeEvent.dataTransfer),l=h(this.refs.container.getDOMNode(),j.nativeEvent);if(l!=null){var m=k.getFiles();if(this.props.onDropFiles&&m.length>0){this.props.onDropFiles(l,m);}else if(this._internalDrag){this.props.onDropSelection(l);}else this.props.onDropText(l,k.getText());}j.preventDefault();this.exitCurrentMode();}};e.exports=i;});
__d("AbstractTextEditor.react",["AbstractTextEditorPlaceholder.react","AbstractTextEditorProps","DocumentStyles","DOMScroll","React","TextEditorBlock.react","TextEditorLeaf.react","TextEditorCompositionHandler","TextEditorCompositionState","TextEditorEditHandler","TextEditorDragHandler","TextEditorModes","Vector","cx","extendArray","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=a.MutationObserver||a.WebKitMutationObserver;function x(aa){return function(ba){var ca=this._handler&&this._handler[aa];ca&&ca.call(this,ba);};}function y(aa){switch(aa){case r.EDIT:return p;case r.COMPOSITE:return n;case r.DRAG:return q;case r.CUT:case r.RENDER:return null;}}var z=k.createClass({displayName:'AbstractTextEditor',propTypes:h.propTypes,getDefaultProps:h.getDefaultProps,_onBlur:x('onBlur'),_onFocus:x('onFocus'),_onSelect:x('onSelect'),_onKeyDown:x('onKeyDown'),_onKeyUp:x('onKeyUp'),_onKeyPress:x('onKeyPress'),_onMouseDown:x('onMouseDown'),_onMouseUp:x('onMouseUp'),_onCharacterData:x('onCharacterData'),_onCompositionStart:x('onCompositionStart'),_onCompositionEnd:x('onCompositionEnd'),_onDragStart:x('onDragStart'),_onDragOver:x('onDragOver'),_onDragEnd:x('onDragEnd'),_onDrop:x('onDrop'),_onCut:x('onCut'),_onCopy:x('onCopy'),_onPaste:x('onPaste'),_onBeforeInput:x('onBeforeInput'),_renderContents:function(){var aa=this.props.documentView,ba=aa.getText(),ca=aa.getBlockDirections(),da=[],ea,fa;function ga(ja,ka,la,ma){ea=[];var na=this.props.BlockComponent||l;da.push(na({key:ja,offsetKey:ja,text:ba.substr(ka,la-ka),blockProps:this.props.blockProps,blockStyleFn:this.props.blockStyleFn,style:ma,direction:ca[da.length]},ea));}function ha(ja,ka,la,ma){if(ma){fa=[];var na=this.props.documentView.getEntities()[ka];ea.push(ma({key:ja,offsetKey:ja,documentView:aa,selectionState:this.props.selectionState,entityKey:na,text:ba.substr(ka,la-ka)},fa));}else fa=ea;}function ia(ja,ka,la,ma){fa.push(m({key:ja,offsetKey:ja,documentView:aa,selectionState:this.props.selectionState,text:ba.substr(ka,la-ka),style:ma||i.INLINE.NONE,styleFn:this.props.inlineStyleFn}));}this.props.documentView.iterate(ga.bind(this),ha.bind(this),ia.bind(this));return da;},_attachMutationObserver:function(){if(!w)return;var aa=[],ba=function(){if(aa.length){this._onCharacterData(aa);aa.length=0;}}.bind(this);this._mutationObserver=new w(function(ca){if(!this._guardAgainstRender){if(aa.length===0)v(ba);u(aa,ca);}}.bind(this));this._mutationObserver.observe(this.refs.editorContainer.getDOMNode(),{characterDataOldValue:true,characterData:true,subtree:true});},_disconnectMutationObserver:function(){if(this._mutationObserver){this._mutationObserver.disconnect();this._mutationObserver=null;}},_renderPlaceholder:function(){var aa=(this.props.placeholder&&!this.props.documentView.getText());if(aa)return (g({text:this.props.placeholder,selectionState:this.props.selectionState,compositionState:this._compositionState}));},render:function(){return (k.DOM.div({className:"_5yw9"},this._renderPlaceholder(),k.DOM.div({className:"_5ywa",ref:"editorContainer"},k.DOM.div({ref:"editor",role:"textbox",className:"_54-z",onBlur:this._onBlur,onFocus:this._onFocus,onSelect:this._onSelect,onMouseUp:this._onMouseUp,onKeyDown:this._onKeyDown,onKeyUp:this._onKeyUp,onKeyPress:this._onKeyPress,onCut:this._onCut,onCopy:this._onCopy,onPaste:this._onPaste,onDragStart:this._onDragStart,onDragOver:this._onDragOver,onDragEnd:this._onDragEnd,onDrop:this._onDrop,onCompositionStart:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,onBeforeInput:this._onBeforeInput,spellCheck:this.props.spellCheck,contentEditable:true},this._renderContents()))));},_focus:function(){var aa=s.getScrollPosition();this.refs.editor.getDOMNode().focus();j.scrollTo(aa,false);},componentDidMount:function(){this._renderedVersion=null;this._clipboard=null;this._clonedEditor=null;this._guardAgainstRender=false;this._handler=p;var aa=this.props.documentView.getBlockDirections();this._renderedDirections=aa.join('');this._attachMutationObserver();},shouldComponentUpdate:function(aa){var ba=aa.documentView.getBlockDirections();return (!this._guardAgainstRender&&(aa.documentView.getVersion()!==this._renderedVersion||ba.join('')!==this._renderedDirections));},componentWillUpdate:function(){this.setMode(r.RENDER);},componentDidUpdate:function(){this.exitCurrentMode();this._renderedVersion=this.props.documentView.getVersion();var aa=this.props.documentView.getBlockDirections();this._renderedDirections=aa.join('');},componentWillMount:function(){this._compositionState=new o(false);this._selectionListener=this.props.selectionState.addListener('focus',this._focus);},componentWillUnmount:function(){this._disconnectMutationObserver();if(this._selectionListener){this._selectionListener.remove();this._selectionListener=null;}},expectDuplicateMutation:function(){this._renderedVersion=this.props.documentView.getVersion();},resetRenderedVersion:function(){this._renderedVersion=null;this._renderedDirections=null;},setMode:function(aa){this._handler=y(aa);},exitCurrentMode:function(){this.setMode(r.EDIT);},captureEditorDOM:function(){this._clonedEditor=this.refs.editor.getDOMNode().cloneNode(true);},restoreEditorDOM:function(){var aa=this.refs.editorContainer.getDOMNode();aa.innerHTML='';aa.appendChild(this._clonedEditor);this._focus();this._clonedEditor=null;},setRenderGuard:function(){this._guardAgainstRender=true;},removeRenderGuard:function(){this._guardAgainstRender=false;}});e.exports=z;});
__d("AbstractMentionsTextEditor.react",["AbstractTextEditor.react","AbstractTextEditorProps","Bootloader","Locale","ReactPropTypes","React","ReactLayeredComponentMixin","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=j.isRTL(),p=false,q,r,s,t=5,u=5,v=l.createClass({displayName:'AbstractMentionsTextEditor',mixins:[m],propTypes:n({},h.propTypes,{mentionsSource:k.object,excludedEntries:k.object,onShowMentions:k.func.isRequired,onAddMention:k.func.isRequired,typeaheadView:k.func.isRequired,typeaheadViewProps:k.object}),getDefaultProps:h.getDefaultProps,componentWillMount:function(){var w=function(){setTimeout(this._searchIfCollapsed,0);}.bind(this);this._listeners=[this.props.selectionState.addListener('focus',w),this.props.selectionState.addListener('update',w)];},componentWillUnmount:function(){this._listeners.forEach(function(w){w.remove();});this._listeners=null;},getInitialState:function(){return {contextualBounds:null,highlightedMentionable:null,mentionableEntries:null};},_onShowMentions:function(w,x){var y=w&&w.length;if(!y&&!this.state.mentionableEntries)return;var z=y?w.slice(0,t):null;if(z){var aa=this.props.typeaheadViewProps;if(aa&&aa.mentionSortFn)z.sort(aa.mentionSortFn);this.props.onShowMentions(z,x);}this.setState({contextualBounds:y?s(x,o):null,highlightedMentionable:y?w[0]:null,mentionableEntries:z});},_onBlur:function(w){this.setState(this.getInitialState());this.props.onBlur(w);},_onFocus:function(w){if(!p)i.loadModules(["ContextualLayer.react","TypeaheadNavigation","getMentionableRect"],function(x,y,z){q=x;r=y;s=z;p=true;});this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus(w);},_onReturn:function(w){if(this.state.highlightedMentionable&&!w.nativeEvent.getModifiers().any){this._onMentionSelect(this.state.highlightedMentionable,w);}else this.props.onReturn(w);},_onTab:function(w){if(this.state.highlightedMentionable){w.preventDefault();this._onMentionSelect(this.state.highlightedMentionable,w);}else this.props.onTab&&this.props.onTab(w);},_onEscape:function(w){if(this.state.highlightedMentionable){this.setState(this.getInitialState());}else this.props.onEscape&&this.props.onEscape(w);},_onUpArrow:function(w){if(this.state.mentionableEntries){w.preventDefault();r.moveUp(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onUpArrow&&this.props.onUpArrow(w);},_onDownArrow:function(w){if(this.state.mentionableEntries){w.preventDefault();r.moveDown(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onDownArrow&&this.props.onDownArrow(w);},_onMentionHighlight:function(w){this.setState({highlightedMentionable:w});},_onMentionSelect:function(w,x){this.props.onAddMention(w,x);this.setState(this.getInitialState());},_searchIfCollapsed:function(){var w=this.props.selectionState;if(w.hasFocus()&&w.isCollapsed())this.props.mentionsSource&&this.props.mentionsSource.search(this.props.documentView.getContent(),w.getStartOffset(),this._onShowMentions);},renderLayers:function(){if(!p)return;var w=this.state.mentionableEntries,x=this.props.selectionState,y=this.props.typeaheadView,z=(x.isCollapsed()&&x.hasFocus()&&w&&w.length);return {entries:q({shown:z,contextRef:"container",contextBounds:this.state.contextualBounds,offsetY:u,position:"below"},y({viewProps:this.props.typeaheadViewProps,highlightedEntry:this.state.highlightedMentionable,entries:w||[],onSelect:this._onMentionSelect,onHighlight:this._onMentionHighlight}))};},render:function(){return (l.DOM.div({ref:"container",className:this.props.className},this.transferPropsTo(g({onBlur:this._onBlur,onFocus:this._onFocus,onReturn:this._onReturn,onTab:this._onTab,onEscape:this._onEscape,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow}))));}});e.exports=v;});
__d("MentionSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'MentionSpan',render:function(){return (g.DOM.span({className:"_5u8u",spellCheck:false},this.props.children));}});e.exports=i;});
__d("WeakMentionSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'WeakMentionSpan',render:function(){return (g.DOM.span({className:"_whq",spellCheck:false},this.props.children));}});e.exports=i;});
__d("DocumentCommands",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({UNDO:true,REDO:true,DELETE:true,DELETE_WORD:true,DELETE_TO_END_OF_BLOCK:true,BACKSPACE:true,BACKSPACE_WORD:true,BACKSPACE_TO_END_OF_BLOCK:true,BOLD:true,ITALIC:true,UNDERLINE:true,INSERT_BLOCK_DELIMITER:true,TRANSPOSE_CHARACTERS:true,MOVE_SELECTION_TO_START_OF_BLOCK:true,MOVE_SELECTION_TO_END_OF_BLOCK:true});e.exports=h;});
__d("DocumentEntityMutability",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({MUTABLE:null,IMMUTABLE:null,SEGMENTED:null});e.exports=h;});
__d("DocumentEntityTypes",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({MENTION:null,WEAK_MENTION:null,LINK:null,FB_IMAGE:null});e.exports=h;});
__d("DocumentEntity",["DocumentEntityMutability","DocumentEntityTypes","invariant"],function(a,b,c,d,e,f,g,h,i){var j={},k=0,l={create:function(n,o,p){var q=new m(n,o,p);j[++k]=q;return k.toString();},get:function(n){var o=j[n];i(!!o);return o;}};function m(n,o,p){"use strict";i(n in h);i(o in g);this.$DocumentEntityInstance0=n;this.$DocumentEntityInstance1=o;this.$DocumentEntityInstance2=p;}m.prototype.getType=function(){"use strict";return this.$DocumentEntityInstance0;};m.prototype.getMutability=function(){"use strict";return this.$DocumentEntityInstance1;};m.prototype.getData=function(){"use strict";return this.$DocumentEntityInstance2;};e.exports=l;});
__d("checkRangeOverlap",["invariant"],function(a,b,c,d,e,f,g){function h(i,j,k,l){g(i<=j&&k<=l);return (i<l&&j>k);}e.exports=h;});
__d("findRanges",[],function(a,b,c,d,e,f){function g(h,i,j){var k=0,l=0,m;for(var n=0;n<h.length;n++){l++;m=h[n];if(m!==h[n+1]){if(i(m))j(k,l);k=l;}}}e.exports=g;});
__d("getRangesForDocumentEntity",["findRanges","invariant"],function(a,b,c,d,e,f,g,h){function i(j,k){var l=[];g(j.getEntities(),function(m){return m===k;},function(m,n){l.push({start:m,end:n});});h(!!l.length);return l;}e.exports=i;});
__d("getDocumentEntityRemovalDiffs",["DocumentEntity","DocumentEntityMutability","checkRangeOverlap","fillArray","getRangesForDocumentEntity"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.MUTABLE;function m(o,p,q,r){var s=g.get(p),t=k(o,p),u=s.getMutability();t=t.filter(function(v){return i(q,r,v.start,v.end);});if(u===l)return t.map(function(v){return n(o,Math.max(v.start,q),Math.min(v.end,r));});return t.map(function(v){return n(o,v.start,v.end);});}function n(o,p,q){var r=o.getEntities().slice(p,q);return {from:{entities:r,start:p,end:q},to:{entities:j(r.length,null),start:p,end:q}};}e.exports=m;});
__d("DocumentRemovalDirection",[],function(a,b,c,d,e,f){var g={BACKWARD:0,FORWARD:1};e.exports=g;});
__d("DocumentEntitySegments",["DocumentRemovalDirection","invariant"],function(a,b,c,d,e,f,g,h){var i=g.FORWARD,j={getRemovalRange:function(k,l,m,n,o){var p=m.split(' ');p=p.map(function(u,v){if(o===i){if(v>0)return ' '+u;}else if(v<p.length-1)return u+' ';return u;});var q=n,r,s;for(var t=0;t<p.length;t++){s=p[t];r=q+s.length;if(k<r&&q<l){if(p.length>1)if(o===i){if(t===0)r++;}else if(t===p.length-1)q--;return {start:q,end:r};}q=r;}h(true);}};e.exports=j;});
__d("getCharacterRemovalRange",["DocumentEntity","DocumentEntityMutability","DocumentEntitySegments","DocumentRemovalDirection","checkRangeOverlap","getRangesForDocumentEntity","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=j.BACKWARD,o=h.MUTABLE,p=h.IMMUTABLE;function q(r,s,t){var u=t===n?s-1:s,v=r.getEntities()[u];if(!v)return {start:u,end:u+1};var w=g.get(v),x=w.getMutability();if(x===o)return {start:u,end:u+1};var y=l(r,v).filter(function(aa){return k(u,u+1,aa.start,aa.end);});m(y.length==1);var z=y[0];if(x===p)return z;return i.getRemovalRange(u,u+1,r.getText().slice(z.start,z.end),z.start,t);}e.exports=q;});
__d("DocumentModifier",["DocumentCharacters","DocumentEntity","DocumentEntityMutability","DocumentModifierDiffs","DocumentRemovalDirection","emptyFunction","fillArray","getCharacterRemovalRange"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=g.BLOCK_DELIMITER,p=i.MUTABLE,q=k.FORWARD,r=k.BACKWARD,s=[];function t(){var aa=Array.prototype.slice.call(arguments,0);return Array.prototype.concat.apply(s,aa);}function u(aa,ba){if(ba!=null)aa=aa.substr(0,ba);return aa.split(o).length;}function v(aa,ba,ca){ba=ba.filter(l.thatReturnsArgument);if(ba.length){aa.addForwardTransaction(ba);w(aa,ba,true,ca);}}function w(aa,ba,ca,da){if(!ba.length)return;var ea,fa,ga,ha=aa.getData();for(var ia=0;ia<ba.length;ia++){if(ca){ea=ba[ia];fa=ea.from;ga=ea.to;}else{ea=ba[ba.length-1-ia];fa=ea.to;ga=ea.from;}x(ha,fa,ga);}aa.update(ha.text,ha.inlines,ha.blocks,ha.entities);da(ga.start,ga.end);}function x(aa,ba,ca){var da=ba.start,ea=ba.end,fa=aa.text.slice(0,da),ga=aa.text.slice(ea);if(ba.text!==undefined&&ca.text!==undefined)aa.text=fa+ca.text+ga;if(ba.inlines!==undefined&&ca.inlines!==undefined){var ha=aa.inlines.slice(0,da),ia=aa.inlines.slice(ea);aa.inlines=ha.concat(ca.inlines,ia);}if(ba.blocks!==undefined&&ca.blocks!==undefined){var ja=u(fa)-1,ka=aa.blocks.slice(0,ja),la=aa.blocks.slice(ja+ba.blocks.length);aa.blocks=ka.concat(ca.blocks,la);}if(ba.entities!==undefined&&ca.entities!==undefined){var ma=aa.entities.slice(0,da),na=aa.entities.slice(ea);aa.entities=ma.concat(ca.entities,na);}}function y(aa,ba,ca,da){var ea=n(aa,ba,ca),fa=j.removeText(aa,ea.start,ea.end);v(aa,[fa],da);}var z={insertFragment:function(aa,ba,ca,da,ea){var fa=ba.entities,ga=true,ha=aa.getEntities(),ia=ha[ca-1],ja=ha[da];if(ia&&ia===ja){var ka=h.get(ia);if(ka.getMutability()===p)if(fa===undefined){fa=m(ba.text.length,ia);ga=false;}}var la=null;if(ga)la=j.removeEntities(aa,ca,da);var ma=j.removeText(aa,ca,da),na=aa.getBlockStylesAroundRange(ca,ca)[0],oa=j.insertText(aa,ca,ba.text,ba.inlines,fa||m(ba.text.length,null),[na].concat(ba.blocks.slice(1))),pa=t(la,ma,oa);v(aa,pa,ea);},applyEntity:function(aa,ba,ca,da,ea){var fa=j.removeEntities(aa,ca,da),ga=null;if(ba!==null)ga=j.setEntity(aa,ca,da,ba);var ha=t(fa,ga);v(aa,ha,ea);},removeCharacterBackward:function(aa,ba,ca){if(ba>0)y(aa,ba,r,ca);},removeCharacterForward:function(aa,ba,ca){if(ba<aa.getText().length)y(aa,ba,q,ca);},removeRange:function(aa,ba,ca,da){var ea=j.removeEntities(aa,ba,ca),fa=j.removeText(aa,ba,ca);v(aa,t(ea,fa),da);},moveText:function(aa,ba,ca,da,ea){var fa=j.removeEntities(aa,ba,ca),ga=j.removeText(aa,ba,ca),ha=null;if(ga){ha=j.insertText(aa,da,ga.from.text,ga.from.inlines,m(ga.from.text.length,null),ga.from.blocks);if(da>ba&&ga)j.shiftDiff(ha,-ga.from.text.length);}var ia=t(fa,ga,ha);v(aa,ia,ea);},replaceText:function(aa,ba,ca,da,ea,fa,ga){var ha=aa.getBlockStylesAroundRange(ea,ea)[0],ia={text:ba,inlines:m(ba.length,ca),entities:da?m(ba.length,da):undefined,blocks:m(u(ba),ha)};z.insertFragment(aa,ia,ea,fa,ga);},applyBlockStyle:function(aa,ba,ca,da,ea){v(aa,[j.setBlockStyle(aa,ca,da,ba)],ea);},applyInlineStyle:function(aa,ba,ca,da,ea){v(aa,[j.addInlineStyle(aa,ca,da,ba)],ea);},removeInlineStyle:function(aa,ba,ca,da,ea){v(aa,[j.removeInlineStyle(aa,ca,da,ba)],ea);},undo:function(aa,ba){w(aa,aa.getUndoDiffs(),false,ba);},redo:function(aa,ba){w(aa,aa.getRedoDiffs(),true,ba);}};e.exports=z;});
__d("DocumentRemovableWord",["TokenizeUtil"],function(a,b,c,d,e,f,g){var h=g.getPunctuation();h=h.replace("\'","").slice(1,-1);var i='\\s'+h,j='^('+'['+i+']*'+'[^'+i+']+'+'|['+i+']+'+')',k=new RegExp(j),l='('+'[^'+i+']+'+'['+i+']*'+'|['+i+']+'+')$',m=new RegExp(l);function n(p,q){var r=q?m.exec(p):k.exec(p);return r?r[0]:null;}var o={getBackward:function(p){return n(p,true);},getForward:function(p){return n(p,false);}};e.exports=o;});
__d("getCurrentInlineStyleForOffset",["DocumentStyles"],function(a,b,c,d,e,f,g){var h=g.INLINE.NONE;function i(j,k){var l=j.getText().length,m=j.getInlineStyles();if(k===0){k=0;}else if(k===l+1){k=l-1;}else k=k-1;return m[k]||h;}e.exports=i;});
__d("getCurrentInlineStyle",["DocumentStyles","getCurrentInlineStyleForOffset"],function(a,b,c,d,e,f,g,h){var i=g.INLINE.NONE;function j(k,l){if(!l.hasFocus())return i;var m=l.getStartOffset();if(l.isCollapsed())return h(k,m);return k.getInlineStyles()[m]||i;}e.exports=j;});
__d("getTextContentFromFiles",["DocumentCharacters"],function(a,b,c,d,e,f,g){var h=g.BLOCK_DELIMITER,i=/\.textClipping$/,j={'text/plain':true,'text/html':true,'text/rtf':true};function k(m,n){var o=0,p=[];m.forEach(function(q){l(q,function(r){o++;r&&p.push(r);if(o==m.length)n(p.join(h));});});}function l(m,n){if(!a.FileReader||(m.type&&!(m.type in j))){n('');return;}if(m.type===''&&i.test(m.name)){n(m.name.replace(i,''));return;}var o=new FileReader();o.onload=function(){n(o.result);};o.onerror=function(){n('');};o.readAsText(m);}e.exports=k;});
__d("BaseTextEditorMixin",["DocumentCharacters","DocumentCommands","DocumentModifier","DocumentRemovableWord","emptyFunction","getActiveElement","getCurrentInlineStyle","getCurrentInlineStyleForOffset","getTextContentFromFiles"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=g.BLOCK_DELIMITER,q=g.SOFT_NEWLINE,r={getHandlerForCommand:function(s){switch(s){case h.UNDO:return this.undo;case h.REDO:return this.redo;case h.DELETE:return this.onDelete;case h.DELETE_WORD:return this.onDeleteWord;case h.DELETE_TO_END_OF_BLOCK:return this.onDeleteToEndOfBlock;case h.BACKSPACE:return this.onBackspace;case h.BACKSPACE_WORD:return this.onBackspaceWord;case h.BACKSPACE_TO_END_OF_BLOCK:return this.onBackspaceToEndOfBlock;case h.INSERT_BLOCK_DELIMITER:return this.onInsertNewline;case h.TRANSPOSE_CHARACTERS:return this.onTransposeCharacters;case h.MOVE_SELECTION_TO_START_OF_BLOCK:return this.moveSelectionToStartOfBlock;case h.MOVE_SELECTION_TO_END_OF_BLOCK:return this.moveSelectionToEndOfBlock;default:return k;}},componentWillReceiveProps:function(s){var t=s.documentContent,u=this.props.documentContent;if(t&&u!=t){this.props.selectionState.update(0,0);}else{var v=u.getText().length;this.props.selectionState.constrainLength(v);}},onFocus:function(){this.props.selectionState.focus();},onBlur:function(){if(a.getSelection&&l()===document.body)a.getSelection().removeAllRanges();this.props.selectionState.blur();},onSelect:function(s,t,u){if(this._blockSelectEvents)return;var v=this.props.selectionState;if(s===null){v.update(0,0);v.blur();}else if(u){this.updateDocument(s,t);}else v.update(s,t);},updateDocument:function(s,t){this.props.selectionState.update(s,t);this._blockSelectEvents=true;this.forceUpdate(function(){this.props.onChange&&this.props.onChange();this._blockSelectEvents=false;}.bind(this));},updateDocumentAndCollapseSelection:function(s,t){this.updateDocument(t,t);},undo:function(){i.undo(this.props.documentContent,this.updateDocument);},redo:function(){i.redo(this.props.documentContent,this.updateDocument);},onKeyCommand:function(s){var t=this.getHandlerForCommand(s);t();},onCut:function(s,t){i.removeRange(this.props.documentContent,s,t,this.updateDocument);},onPasteFragment:function(s){var t=this.props.selectionState;i.insertFragment(this.props.documentContent,s,t.getStartOffset(),t.getEndOffset(),this.updateDocumentAndCollapseSelection);},_removeTextWithStrategy:function(s){var t=this.props.selectionState,u=t.getEndOffset();if(t.isCollapsed()){var v=s(u);if(v){var w=v<0;i.removeRange(this.props.documentContent,w?u+v:u,w?u:u+v,this.updateDocumentAndCollapseSelection);return;}}this._removeRange();},onDelete:function(){var s=this.props.selectionState;if(s.isCollapsed()){i.removeCharacterForward(this.props.documentContent,s.getAnchorOffset(),this.updateDocumentAndCollapseSelection);}else this._removeRange();},onDeleteWord:function(){var s=this.props.selectionState.getStartOffset(),t=this.props.documentContent;if(s<t.getText().length&&t.getEntities()[s]){this.onDelete();return;}this._removeTextWithStrategy(function(u){var v=this.props.documentContent.getText(),w=j.getForward(v.slice(u));return w?w.length:null;}.bind(this));},onDeleteToEndOfBlock:function(){this._removeTextWithStrategy(function(s){var t=this.props.documentContent.getText(),u=t.indexOf(p,s);if(u===-1){u=t.length;}else if(u===s)u++;return u-s;}.bind(this));},onBackspace:function(){var s=this.props.selectionState;if(s.isCollapsed()){i.removeCharacterBackward(this.props.documentContent,s.getAnchorOffset(),this.updateDocumentAndCollapseSelection);}else this._removeRange();},onBackspaceWord:function(){var s=this.props.selectionState.getStartOffset(),t=this.props.documentContent;if(s>0&&t.getEntities()[s-1]){this.onBackspace();return;}this._removeTextWithStrategy(function(u){var v=this.props.documentContent.getText(),w=j.getBackward(v.slice(0,u));return w?-w.length:null;}.bind(this));},onBackspaceToEndOfBlock:function(){this._removeTextWithStrategy(function(s){var t=this.props.documentContent.getText(),u=t.slice(0,s).lastIndexOf(p);if(u===-1){u=0;}else if(u<(s-1))u++;return u-s;}.bind(this));},moveSelectionToStartOfBlock:function(){this._moveSelectionToBlockEndpoint(true);},moveSelectionToEndOfBlock:function(){this._moveSelectionToBlockEndpoint(false);},_moveSelectionToBlockEndpoint:function(s){var t=this.props.documentContent,u=this.props.selectionState.getStartOffset(),v=t.getText(),w=s?v.substr(0,u).split('').reverse().join(''):v.substr(u),x=w.length;for(var y=0;y<w.length;y++)if(w[y]===p||w[y]===q){x=y;break;}if(x>0){var z=s?u-x:u+x;t.bumpVersion();this.updateDocument(z,z);}},_removeRange:function(){var s=this.props.selectionState;i.removeRange(this.props.documentContent,s.getStartOffset(),s.getEndOffset(),this.updateDocumentAndCollapseSelection);},onReturn:function(s){s.shiftKey?this.onInsertSoftNewline():this.onInsertNewline();},onInsertSoftNewline:function(){this.onCharacters(q);},onInsertNewline:function(){this.onCharacters(p);},onTransposeCharacters:function(){var s=this.props.selectionState,t=s.getStartOffset(),u=this.props.documentContent.getText();if(s.isCollapsed()&&t!==0&&t!==u.length)i.moveText(this.props.documentContent,t-1,t,t+1,this.updateDocumentAndCollapseSelection);},onCharacters:function(s){var t=this.props.selectionState,u=m(this.props.documentContent,t);if(this.state.currentInlineStyleOverride){u^=this.state.currentInlineStyleOverride;this.setState({currentInlineStyleOverride:null});}i.replaceText(this.props.documentContent,s,u,null,t.getStartOffset(),t.getEndOffset(),this.updateDocumentAndCollapseSelection);},onAlter:function(s,t,u){var v=this.props.selectionState.getEndOffset(),w=s,x=s+t.length;i.replaceText(this.props.documentContent,u,this.props.documentContent.getInlineStyles()[w],null,w,x,function(){if(v!==w+u.length)v+=u.length-t.length;this.updateDocument(v,v);}.bind(this));},onDropSelection:function(s){var t=this.props.selectionState;i.moveText(this.props.documentContent,t.getStartOffset(),t.getEndOffset(),s,this.updateDocument);},onDropText:function(s,t){this._insertTextAtOffset(s,t);},onDropFiles:function(s,t){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(s,t))return;o(t,function(u){u&&this._insertTextAtOffset(s,u);}.bind(this));},onPasteFiles:function(s){if(this.props.handlePastedFiles&&this.props.handlePastedFiles(s))return;var t=this.props.selectionState.getStartOffset();o(s,function(u){u&&this._insertTextAtOffset(t,u);}.bind(this));},_insertTextAtOffset:function(s,t){var u=this.props.documentContent;i.replaceText(u,t,n(u,s),null,s,s,this.updateDocument);}};e.exports=r;});
__d("MentionsTextEditorMixin",["BaseTextEditorMixin","DocumentEntity","DocumentEntityTypes","DocumentEntityMutability","DocumentModifier","getCurrentInlineStyle","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(r,s,t){for(var u=t;u<=s.length;u++)if(r.substr(-u)==s.substr(0,u))t=u;return t;}function o(r){var s=r.getType()==='user'?j.SEGMENTED:j.IMMUTABLE,t=r.getAuxiliaryData(),u=t&&t.renderType==='non_member'?i.WEAK_MENTION:i.MENTION;return h.create(u,s,{id:r.getUniqueID()});}var p={onShowMentions:function(r,s){this._mentionOffset=s;this.props.onShowMentions&&this.props.onShowMentions(r,s);},onAddMention:function(r,s){var t=this.props.selectionState,u=t.getStartOffset(),v=u-n(this.props.documentContent.getText().substr(0,u),r.getTitle(),this._mentionOffset);k.replaceText(this.props.documentContent,r.getTitle(),l(this.props.documentContent,t),o(r),v,u,this.updateDocumentAndCollapseSelection);this.props.onAddMention&&this.props.onAddMention(r,s);}},q=m(g,p);e.exports=q;});
__d("HashtagSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'HashtagSpan',render:function(){return (g.DOM.span({className:"_5u8n",spellCheck:false},this.props.children));}});e.exports=i;});
__d("getDefaultKeyBinding",["DocumentCommands","Keys","UserAgent"],function(a,b,c,d,e,f,g,h,i){var j=i.osx(),k=i.firefox(),l=j&&k&&k<29;function m(t){return t.ctrlKey&&!t.altKey;}function n(t){return j?t.metaKey:m(t);}function o(t){return j?t.altKey:m(t);}function p(t){if(n(t))return t.shiftKey?g.REDO:g.UNDO;}function q(t){return o(t)?g.DELETE_WORD:g.DELETE;}function r(t){if(n(t)&&j)return g.BACKSPACE_TO_END_OF_BLOCK;return o(t)?g.BACKSPACE_WORD:g.BACKSPACE;}function s(t){switch(t.keyCode){case 66:return n(t)?g.BOLD:null;case 68:return m(t)?g.DELETE:null;case 72:return m(t)?g.BACKSPACE:null;case 73:return n(t)?g.ITALIC:null;case 75:return m(t)?g.DELETE_TO_END_OF_BLOCK:null;case 79:return m(t)?g.INSERT_BLOCK_DELIMITER:null;case 84:return m(t)?g.TRANSPOSE_CHARACTERS:null;case 85:return n(t)?g.UNDERLINE:null;case 90:return p(t)||null;case h.DELETE:return q(t);case h.BACKSPACE:return r(t);case h.LEFT:return (l&&n(t)?g.MOVE_SELECTION_TO_START_OF_BLOCK:null);case h.RIGHT:return (l&&n(t)?g.MOVE_SELECTION_TO_END_OF_BLOCK:null);default:return null;}}e.exports=s;});
__d("DocumentCompositeDecorator",["fillArray"],function(a,b,c,d,e,f,g){function h(k){"use strict";this.$DocumentCompositeDecorator0=k.slice();this.$DocumentCompositeDecorator1={};}h.prototype.getDecorations=function(k){"use strict";var l=g(k.getText().length,null),m=0,n=this.$DocumentCompositeDecorator1;this.$DocumentCompositeDecorator0.forEach(function(o){var p=o.getStrategy(),q=o.getComponent();p(k,function(r,s){if(i(l,r,s)){n[m]=q;j(l,r,s,m);m++;}});});return l;};h.prototype.getComponentForKey=function(k){"use strict";return this.$DocumentCompositeDecorator1[k];};function i(k,l,m){for(var n=l;n<m;n++)if(k[n]!=null)return false;return true;}function j(k,l,m,n){for(var o=l;o<m;o++)k[o]=n;}e.exports=h;});
__d("DocumentContent",["DocumentCharacters","DocumentStyles","fillArray","invariant"],function(a,b,c,d,e,f,g,h,i,j){var k=g.BLOCK_DELIMITER,l=h.BLOCK,m=h.INLINE;function n(s,t){j(t.length===q(s));return t;}function o(s,t){j(t.length==s.length);return t;}function p(s,t){j(t.length===s.length);return t;}function q(s,t){if(t!=null)s=s.substr(0,t);return s.split(k).length;}function r(s,t,u,v){"use strict";this.$DocumentContent0=1;this.$DocumentContent1=s||'';this.$DocumentContent2=t?o(this.$DocumentContent1,t):i(this.$DocumentContent1.length,m.NONE);this.$DocumentContent3=u?n(this.$DocumentContent1,u):i(q(this.$DocumentContent1),l.UNSTYLED);this.$DocumentContent4=v?p(this.$DocumentContent1,v):i(this.$DocumentContent1.length,null);this.$DocumentContent5=[];this.$DocumentContent6=[];}r.prototype.bumpVersion=function(){"use strict";this.$DocumentContent0++;};r.prototype.getVersion=function(){"use strict";return 'v'+this.$DocumentContent0;};r.prototype.getText=function(){"use strict";return this.$DocumentContent1;};r.prototype.getInlineStyles=function(){"use strict";return this.$DocumentContent2;};r.prototype.getBlockStyles=function(){"use strict";return this.$DocumentContent3;};r.prototype.getBlockStylesAroundRange=function(s,t){"use strict";var u=q(this.$DocumentContent1,s)-1,v=q(this.$DocumentContent1,t);return this.$DocumentContent3.slice(u,v);};r.prototype.getEntities=function(){"use strict";return this.$DocumentContent4;};r.prototype.getFragment=function(s,t){"use strict";return {text:this.$DocumentContent1.slice(s,t),inlines:this.$DocumentContent2.slice(s,t),blocks:this.getBlockStylesAroundRange(s,t),entities:this.$DocumentContent4.slice(s,t)};};r.prototype.getData=function(){"use strict";return {text:this.$DocumentContent1,inlines:this.$DocumentContent2,blocks:this.$DocumentContent3,entities:this.$DocumentContent4};};r.prototype.update=function(s,t,u,v){"use strict";p(s,v);o(s,t);n(s,u);this.$DocumentContent1=s;this.$DocumentContent2=t;this.$DocumentContent3=u;this.$DocumentContent4=v;this.$DocumentContent0++;};r.prototype.addForwardTransaction=function(s){"use strict";this.$DocumentContent5.push(s);this.$DocumentContent6.length=0;};r.prototype.getUndoDiffs=function(){"use strict";if(this.$DocumentContent5.length>0){var s=this.$DocumentContent5.pop();this.$DocumentContent6.push(s);return s;}return [];};r.prototype.getRedoDiffs=function(){"use strict";if(this.$DocumentContent6.length>0){var s=this.$DocumentContent6.pop();this.$DocumentContent5.push(s);return s;}return [];};e.exports=r;});
__d("DocumentDecorator",[],function(a,b,c,d,e,f){function g(h,i){"use strict";this.$DocumentDecorator0=h;this.$DocumentDecorator1=i;}g.prototype.getStrategy=function(){"use strict";return this.$DocumentDecorator0;};g.prototype.getComponent=function(){"use strict";return this.$DocumentDecorator1;};e.exports=g;});
__d("getEntityMatcher",["DocumentEntity","findRanges"],function(a,b,c,d,e,f,g,h){function i(j){return function(k,l){h(k.getEntities(),function(m){return m!==null&&j(g.get(m));},l);};}e.exports=i;});
__d("getHashtagMatches",["getHashtagRegex"],function(a,b,c,d,e,f,g){var h=g();function i(j,k){var l=j.getText(),m,n,o,p;while((m=h.exec(l))!==null){n=m.index+m[1].length;o=m[2];p=m[3];k(n,n+o.length+p.length);}}e.exports=i;});
__d("MentionsInput.react",["AbstractMentionsTextEditor.react","DocumentCharacters","DocumentCompositeDecorator","DocumentContent","DocumentDecorator","DocumentEntityTypes","DocumentSelectionState","DocumentView","HashtagSpan.react","MentionSpan.react","MentionsTextEditorMixin","ReactPropTypes","React","WeakMentionSpan.react","cx","emptyFunction","getDefaultKeyBinding","getEntityMatcher","getHashtagMatches"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=v.thatReturns(''),aa=v.thatReturns(''),ba=l.MENTION,ca=l.WEAK_MENTION,da=new i([new k(x(function(fa){return fa.getType()===ba;}),p),new k(x(function(fa){return fa.getType()===ca;}),t),new k(y,o)]),ea=s.createClass({displayName:'MentionsInput',mixins:[q],propTypes:{documentContent:r.instanceOf(j).isRequired,selectionState:r.instanceOf(m).isRequired,mentionsSource:r.object,typeaheadView:r.func.isRequired,typeaheadViewProps:r.object,spellCheck:r.bool,placeholder:r.string,className:r.string,handleReturn:r.func,handleDroppedFiles:r.func,handlePastedFiles:r.func,onAddMention:r.func,onShowMentions:r.func,onChange:r.func,onFocus:r.func,onBlur:r.func,onFile:r.func},_onReturn:function(fa){if(this.props.handleReturn&&this.props.handleReturn(fa))return;this.onCharacters(h.BLOCK_DELIMITER);},_onBlur:function(fa){this.onBlur(fa);this.props.onBlur&&this.props.onBlur(fa);},_onFocus:function(fa){this.onFocus(fa);this.props.onFocus&&this.props.onFocus(fa);},_getStateForDocument:function(fa){return {documentView:new n(fa,da)};},componentWillReceiveProps:function(fa){if(this.props.documentContent!==fa.documentContent)this.setState(this._getStateForDocument(fa.documentContent));},getInitialState:function(){return this._getStateForDocument(this.props.documentContent);},render:function(){return this.transferPropsTo(s.DOM.div({className:"_5yk1",onFocus:this._onFocus},g({className:"_5yk2",documentView:this.state.documentView,placeholder:this.props.placeholder,selectionState:this.props.selectionState,mentionsSource:this.props.mentionsSource,typeaheadView:this.props.typeaheadView,typeaheadViewProps:this.props.typeaheadViewProps,keyBindingFn:w,blockStyleFn:z,inlineStyleFn:aa,spellCheck:this.props.spellCheck,onShowMentions:this.onShowMentions,onAddMention:this.onAddMention,onBackspace:this.onBackspace,onCharacters:this.onCharacters,onAlter:this.onAlter,onCut:this.onCut,onPasteFragment:this.onPasteFragment,onDelete:this.onDelete,onDropFiles:this.onDropFiles,onDropSelection:this.onDropSelection,onDropText:this.onDropText,onKeyCommand:this.onKeyCommand,onPasteFiles:this.onPasteFiles,onSelect:this.onSelect,onReturn:this._onReturn,onBlur:this._onBlur,onFocus:this._onFocus,handleDroppedFiles:this.props.handleDroppedFiles,handlePastedFiles:this.props.handlePastedFiles})));}});e.exports=ea;});
__d("getMentionsTextForDocument",["DocumentCharacters","DocumentEntity","DocumentEntityTypes"],function(a,b,c,d,e,f,g,h,i){var j=/[\\\]:]/g,k=g.BLOCK_DELIMITER,l=new RegExp(k,'ig'),m=g.SOFT_NEWLINE;function n(q){var r=q.getType();return (r===i.MENTION||r===i.WEAK_MENTION);}function o(q,r){if(r){var s=h.get(r);if(n(s)){q=q.replace(j,function(t){return '\\'+t;});return '@['+s.getData().id+':'+q+']';}}else return q.replace('@[','@ [');}function p(q){var r=q.getText().replace(l,function(x){return m;}),s=q.getEntities(),t=null,u=0,v=[];for(var w=0;w<s.length;w++)if(s[w]!=t){v.push(o(r.substr(u,w-u),t));t=s[w];u=w;}v.push(o(r.substr(u),t));return v.join('');}e.exports=p;});
__d("UFIExperimentalMentionsInput.react",["Bootloader","DocumentCharacters","DocumentContent","DocumentEntity","DocumentEntityMutability","DocumentEntityTypes","DocumentModifier","DocumentSelectionState","Keys","MentionsInput.react","React","UserAgent","cx","emptyFunction","getMentionsTextForDocument","mergeInto"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=h.BLOCK_DELIMITER,x=new RegExp(h.SOFT_NEWLINE,'ig'),y=(r.ie()<=8||r.firefox()<16||r.mobile());function z(da){var ea;if(da&&da.value)ea=da.value.replace(x,function(ga){return w;});var fa=new i(ea);if(da&&da.mentions)da.mentions.forEach(function(ga){var ha=j.create(l.MENTION,k.IMMUTABLE,{id:ga.uid});m.applyEntity(fa,ha,ga.offset,ga.offset+ga.length,t);});return fa;}function aa(da){var ea=da.map(function(fa){return {kind:'file',type:fa.type,getAsFile:t.thatReturns(fa)};});return {clipboardData:{items:ea}};}function ba(da){var ea=/^image\//;return da.filter(function(fa){return ea.test(fa.type);});}var ca=q.createClass({displayName:'UFIExperimentalMentionsInput',getInitialState:function(){var da='';if(this.props.initialData)da=this.props.initialData.value;return {bootloaded:false,fullRender:!!(this.props.initialData&&this.props.initialData.value),typeaheadReporter:null,documentContent:z(this.props.initialData),mentionsSource:null,mentionableEntries:null,selectionState:new n(0,0),fallbackText:da};},hasEnteredText:function(){return !!this.state.documentContent.getText().trim();},focus:function(){this._triggerFullRender(function(){this.state.selectionState.focus();this.forceUpdate();}.bind(this));},_handleReturn:function(da){if(!da.nativeEvent.getModifiers().any&&this._submitComment(da)){this.state.typeaheadReporter&&this.state.typeaheadReporter.sessionEnd();this.setState({documentContent:new i()});return true;}return false;},_submitComment:function(da){var ea=this.state.documentContent,fa={visibleValue:ea.getText(),encodedValue:u(ea)};return this.props.onEnterSubmit(fa,da);},_handleFiles:function(da){var ea=ba(da);if(ea.length){this.props.onPaste(aa(ea));return true;}return false;},_handleDroppedFiles:function(da,ea){return this._handleFiles(ea);},_handlePastedFiles:function(da){return this._handleFiles(da);},_onMentionsInputBlur:function(){this.state.typeaheadReporter&&this.state.typeaheadReporter.sessionEnd();this.props.onBlur&&this.props.onBlur();},_onMentionsInputFocus:function(){if(!this.state.bootloaded&&!this._currentlyBootloading){this._currentlyBootloading=true;g.loadModules(["TypeaheadMetricReporter","getMentionsSearchSource"],function(da,ea){var fa=new da({event_name:'tinder_mentions'});fa.sessionStart();this.setState({typeaheadReporter:fa,bootloaded:true,mentionsSource:ea(this.props.datasource,fa)},function(){this._currentlyBootloading=false;}.bind(this));}.bind(this));}else if(this.state.typeaheadReporter)this.state.typeaheadReporter.sessionStart();this.props.onFocus&&this.props.onFocus();},_onShowMentions:function(da,ea){if(this.state.typeaheadReporter)this.state.typeaheadReporter.reportResults(da.map(function(fa){return fa.getUniqueID();}));this.setState({mentionableEntries:da});},_onAddMention:function(da,ea){if(this.state.typeaheadReporter){this.state.typeaheadReporter.reportSelect(da.getUniqueID(),da.getType(),this.state.mentionableEntries.indexOf(da),ea.button>=0);this.state.typeaheadReporter.sessionEnd();}},_onFallbackKeyPress:function(da){var ea=typeof da.which=='number'?da.which:da.keyCode,fa=(ea===o.RETURN&&!da.nativeEvent.getModifiers().any&&this.state.fallbackText.trim());if(fa){da.preventDefault();var ga={visibleValue:this.state.fallbackText,encodedValue:this.state.fallbackText};if(this.props.onEnterSubmit(ga,da))this.setState({fallbackText:''});}},_onFallbackChange:function(da){this.setState({fallbackText:da.target.value});},_onFallbackBlur:function(da){this.props.onBlur&&this.props.onBlur();},_onFallbackFocus:function(da){this.props.onFocus&&this.props.onFocus();},_sortByRenderType:function(da,ea){var fa=da.getAuxiliaryData().renderType,ga=ea.getAuxiliaryData().renderType;if(fa===ga)return da.getOrder()-ea.getOrder();var ha=this.props.viewOptionsTypeObjectsOrder;return ha.indexOf(fa)-ha.indexOf(ga);},_triggerFullRender:function(da){this.setState({fullRender:true},da);},_renderFallback:function(){return (q.DOM.div(null,q.DOM.textarea({className:"UFIAddCommentInput _5vbt",name:"add_comment_text",placeholder:this.props.placeholder,spellCheck:true,onKeyPress:this._onFallbackKeyPress,onChange:this._onFallbackChange,onBlur:this._onFallbackBlur,onFocus:this._onFallbackFocus,value:this.state.fallbackText})));},_renderProxyInput:function(){return (q.DOM.input({className:"_5t55",name:"add_comment_text",onFocus:this.focus}));},_renderDummy:function(){var da="UFIAddCommentInput _5vr7 _2y3v";return (q.DOM.div({onFocus:this._triggerFullRender.bind(null,t),onMouseOver:this._triggerFullRender.bind(null,t)},this._renderProxyInput(),q.DOM.div({className:da},this.props.placeholder)));},_renderMentionsInput:function(){var da="UFIAddCommentInput _5vr7",ea={mentionSortFn:(this.props.viewOptionsTypeObjectsOrder?this._sortByRenderType:null)};v(ea,this.props.viewProps);return (q.DOM.div(null,this._renderProxyInput(),p({className:da,documentContent:this.state.documentContent,selectionState:this.state.selectionState,mentionsSource:this.state.mentionsSource,typeaheadView:this.props.viewComponent,typeaheadViewProps:ea,spellCheck:true,placeholder:this.props.placeholder,handlePastedFiles:this._handlePastedFiles,handleDroppedFiles:this._handleDroppedFiles,onAddMention:this._onAddMention,onShowMentions:this._onShowMentions,onFocus:this._onMentionsInputFocus,onBlur:this._onMentionsInputBlur,handleReturn:this._handleReturn})));},render:function(){if(y)return this._renderFallback();if(!this.state.fullRender)return this._renderDummy();return this._renderMentionsInput();}});e.exports=ca;});